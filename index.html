<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أذكار القرآن الكريم - Complete Islamic Resources</title>

    <!-- PWA -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#27ae60">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="أذكار">

    <!-- Google Fonts for Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&family=Scheherazade+New:wght@400;500;600;700&family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Celestial Night Sky Palette */
            --night-deep: #0a0e1a;
            --night-mid: #121a2e;
            --night-soft: #1a2540;
            --night-glow: #243156;

            /* Sacred Green Palette */
            --gold-bright: #2ecc71;
            --gold-warm: #27ae60;
            --gold-soft: #a8e6cf;
            --gold-glow: rgba(46, 204, 113, 0.3);

            /* Spiritual Accents */
            --emerald: #1a5c3a;
            --emerald-soft: #27ae60;
            --cream: #faf6ed;
            --cream-soft: #f5f0e3;
            --ivory: #fffef9;

            /* Text Colors */
            --text-light: #e8e4dc;
            --text-muted: #a8a298;
            --text-gold: #2ecc71;
            --text-dark: #1a1a1a;

            /* Shadows & Glows */
            --glow-gold: 0 0 20px rgba(46, 204, 113, 0.4);
            --glow-soft: 0 0 40px rgba(46, 204, 113, 0.2);
            --shadow-deep: 0 10px 40px rgba(0, 0, 0, 0.4);
            --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Amiri', 'Scheherazade New', 'Noto Naskh Arabic', 'Traditional Arabic', serif;
            background: var(--night-deep);
            min-height: 100vh;
            color: var(--text-light);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            overflow-y: auto;
            overflow-x: hidden;
        }

        /* Animated Starfield Background */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
            opacity: 0;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: var(--opacity); transform: scale(1); }
        }

        /* Islamic Geometric Pattern Overlay */
        .pattern-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg fill='%232ecc71' fill-opacity='1'%3E%3Cpath d='M40 0L48.66 20H60L50 32.36L54.64 52.36L40 42L25.36 52.36L30 32.36L20 20H31.34L40 0zM0 40L8.66 60H20L10 72.36L14.64 92.36L0 82L-14.64 92.36L-10 72.36L-20 60H-8.66L0 40zM80 40L88.66 60H100L90 72.36L94.64 92.36L80 82L65.36 92.36L70 72.36L60 60H71.34L80 40z'/%3E%3C/g%3E%3C/svg%3E");
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 100%;
            width: 100%;
            margin: 0;
            background: transparent;
            min-height: 100vh;
        }

        /* Majestic Header */
        .header {
            background: linear-gradient(180deg,
                var(--night-mid) 0%,
                var(--night-soft) 50%,
                var(--night-glow) 100%);
            color: var(--text-light);
            padding: 50px 40px;
            text-align: center;
            border-bottom: 2px solid var(--gold-warm);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg,
                transparent,
                var(--gold-bright),
                transparent);
        }

        .header::after {
            content: '☪';
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5em;
            color: var(--gold-bright);
            opacity: 0.6;
            animation: gentlePulse 4s ease-in-out infinite;
        }

        @keyframes gentlePulse {
            0%, 100% { opacity: 0.4; transform: translateX(-50%) scale(1); }
            50% { opacity: 0.8; transform: translateX(-50%) scale(1.1); }
        }

        .header h1 {
            font-family: 'Scheherazade New', 'Amiri', serif;
            font-size: 4.5em;
            margin-bottom: 15px;
            text-shadow: 0 0 30px rgba(46, 204, 113, 0.5),
                         0 4px 15px rgba(0, 0, 0, 0.5);
            font-weight: 700;
            letter-spacing: 0.03em;
            color: var(--gold-soft);
            animation: titleGlow 6s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { text-shadow: 0 0 30px rgba(46, 204, 113, 0.5), 0 4px 15px rgba(0, 0, 0, 0.5); }
            50% { text-shadow: 0 0 50px rgba(46, 204, 113, 0.7), 0 4px 20px rgba(0, 0, 0, 0.5); }
        }

        .header p {
            font-size: 1.8em;
            opacity: 0.85;
            font-weight: 400;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            font-style: italic;
        }

        /* Ornamental Divider */
        .ornament {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            gap: 15px;
        }

        .ornament-line {
            height: 1px;
            width: 80px;
            background: linear-gradient(90deg, transparent, var(--gold-warm), transparent);
        }

        .ornament-symbol {
            color: var(--gold-bright);
            font-size: 1.2em;
            opacity: 0.7;
        }

        /* Elegant Tab Navigation */
        .tabs-nav {
            display: flex;
            background: linear-gradient(180deg, var(--night-soft) 0%, var(--night-mid) 100%);
            border-bottom: 1px solid var(--gold-warm);
            overflow-x: auto;
            flex-wrap: wrap;
            padding: 10px 20px;
            gap: 10px;
        }

        .tabs-nav button {
            flex: 1;
            min-width: 160px;
            padding: 20px 25px;
            border: 1px solid transparent;
            background: rgba(255, 255, 255, 0.03);
            cursor: pointer;
            font-family: 'Amiri', serif;
            font-size: 1.6em;
            font-weight: 600;
            color: var(--text-muted);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
            white-space: nowrap;
            letter-spacing: 0.02em;
            position: relative;
            overflow: hidden;
        }

        .tabs-nav button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                transparent,
                rgba(46, 204, 113, 0.1),
                transparent);
            transition: left 0.5s ease;
        }

        .tabs-nav button:hover::before {
            left: 100%;
        }

        .tabs-nav button:hover {
            background: rgba(46, 204, 113, 0.1);
            color: var(--gold-soft);
            border-color: rgba(46, 204, 113, 0.3);
            transform: translateY(-2px);
        }

        .tabs-nav button.active {
            color: var(--night-deep);
            background: linear-gradient(135deg, var(--gold-warm) 0%, var(--gold-bright) 100%);
            border-color: var(--gold-bright);
            box-shadow: var(--glow-gold);
            transform: translateY(-2px);
        }

        /* Sub-navigation pills inside tabs */
        .sub-nav {
            display: flex; gap: 8px; margin-bottom: 22px; overflow-x: auto;
            padding-bottom: 8px; flex-wrap: wrap;
        }
        .sub-nav-btn {
            padding: 10px 20px; border-radius: 20px;
            border: 1px solid rgba(46,204,113,0.25); background: rgba(255,255,255,0.04);
            color: var(--text-muted); font-family: 'Amiri', serif; font-size: 1.15em;
            cursor: pointer; transition: all 0.3s; white-space: nowrap;
        }
        .sub-nav-btn:hover { background: rgba(46,204,113,0.1); color: var(--gold-soft); }
        .sub-nav-btn.active {
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            color: var(--night-deep); border-color: var(--gold-bright); font-weight: 600;
        }
        .sub-section { display: none; animation: fadeInUp 0.4s ease; }
        .sub-section.active { display: block; }

        /* Home dashboard cards */
        .home-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .home-card {
            background: linear-gradient(135deg, rgba(26,37,64,0.95), rgba(18,26,46,0.98));
            border: 1px solid rgba(212,175,55,0.18); border-radius: 16px;
            padding: 22px; transition: all 0.3s; cursor: pointer;
        }
        .home-card:hover { transform: translateY(-3px); border-color: rgba(46,204,113,0.4); box-shadow: 0 8px 25px rgba(0,0,0,0.3); }
        .home-card-icon { font-size: 2.2em; margin-bottom: 8px; }
        .home-card-title { font-family: 'Scheherazade New', serif; font-size: 1.4em; color: var(--gold-soft); margin-bottom: 4px; }
        .home-card-desc { font-size: 0.95em; color: var(--text-muted); }

        /* Event countdown cards */
        .event-countdowns { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 14px; margin-bottom: 24px; }
        .event-card {
            text-align: center; padding: 20px 16px; border-radius: 16px;
            background: linear-gradient(135deg, rgba(26,37,64,0.95), rgba(18,26,46,0.98));
            border: 1px solid rgba(46,204,113,0.15); transition: all 0.3s; position: relative; overflow: hidden;
        }
        .event-card.active-event { border-color: var(--gold-bright); box-shadow: 0 0 20px rgba(46,204,113,0.2); }
        .event-card-icon { font-size: 2em; margin-bottom: 6px; }
        .event-card-name { font-family: 'Scheherazade New', serif; font-size: 1.3em; color: var(--gold-soft); margin-bottom: 4px; }
        .event-card-days { font-size: 2.4em; font-weight: 700; color: var(--gold-bright); font-family: 'Amiri', serif; }
        .event-card-label { font-size: 0.9em; color: var(--text-muted); margin-top: 2px; }
        .event-card-date { font-size: 0.85em; color: var(--text-muted); margin-top: 6px; opacity: 0.7; }

        /* Live prayer countdown */
        .live-countdown-bar {
            background: linear-gradient(135deg, rgba(26,37,64,0.98), rgba(18,26,46,0.98));
            border: 1px solid rgba(46,204,113,0.25); border-radius: 16px;
            padding: 20px 24px; margin: 16px 0; text-align: center;
        }
        .countdown-next-label { font-size: 1.1em; color: var(--text-muted); margin-bottom: 6px; }
        .countdown-next-name { font-family: 'Scheherazade New', serif; font-size: 1.6em; color: var(--gold-soft); }
        .countdown-next-timer { font-size: 2.8em; font-weight: 700; color: var(--gold-bright); font-family: 'Amiri', serif; direction: ltr; margin: 8px 0; }
        .countdown-fasting {
            display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;
            margin-top: 14px; padding-top: 14px; border-top: 1px solid rgba(46,204,113,0.1);
        }
        .fasting-item { text-align: center; }
        .fasting-label { font-size: 0.9em; color: var(--text-muted); margin-bottom: 2px; }
        .fasting-value { font-size: 1.3em; font-weight: 600; color: var(--gold-soft); font-family: 'Amiri', serif; direction: ltr; }

        /* Ramadan calendar */
        .ramadan-cal-table {
            width: 100%; border-collapse: collapse; margin: 16px 0;
            font-family: 'Amiri', serif; font-size: 1.05em;
        }
        .ramadan-cal-table th {
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            color: var(--night-deep); padding: 12px 8px; font-weight: 600;
            font-size: 1.1em; position: sticky; top: 0; z-index: 2;
        }
        .ramadan-cal-table td {
            padding: 10px 8px; text-align: center; border-bottom: 1px solid rgba(46,204,113,0.08);
            color: var(--text-light);
        }
        .ramadan-cal-table tr:hover td { background: rgba(46,204,113,0.05); }
        .ramadan-cal-table tr.today-row td { background: rgba(46,204,113,0.12); font-weight: 600; }
        .ramadan-cal-table tr.today-row td:first-child { border-right: 3px solid var(--gold-bright); }
        .ramadan-cal-scroll { max-height: 70vh; overflow-y: auto; border-radius: 14px; border: 1px solid rgba(46,204,113,0.15); }

        /* Prayer times */
        .prayer-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px; margin: 20px 0; }
        .prayer-card {
            text-align: center; padding: 18px 14px; border-radius: 14px;
            background: linear-gradient(135deg, rgba(26,37,64,0.95), rgba(18,26,46,0.98));
            border: 1px solid rgba(212,175,55,0.15); transition: all 0.3s;
        }
        .prayer-card.next { border-color: var(--gold-bright); box-shadow: var(--glow-gold); }
        .prayer-card-name { font-family: 'Scheherazade New', serif; font-size: 1.3em; color: var(--gold-soft); margin-bottom: 6px; }
        .prayer-card-time { font-size: 1.6em; color: var(--text-light); font-weight: 600; font-family: 'Amiri', serif; }

        /* Tasbeeh counter */
        .tasbeeh-container { text-align: center; padding: 30px 0; }
        .tasbeeh-count {
            font-size: 5em; font-weight: 700; color: var(--gold-bright);
            font-family: 'Amiri', serif; margin: 20px 0; text-shadow: 0 0 20px rgba(46,204,113,0.3);
        }
        .tasbeeh-btn {
            width: 160px; height: 160px; border-radius: 50%; border: 3px solid var(--gold-bright);
            background: linear-gradient(135deg, rgba(46,204,113,0.15), rgba(46,204,113,0.05));
            color: var(--gold-bright); font-size: 1.4em; font-family: 'Amiri', serif;
            cursor: pointer; transition: all 0.15s; margin: 20px auto; display: flex;
            align-items: center; justify-content: center;
        }
        .tasbeeh-btn:active { transform: scale(0.95); background: rgba(46,204,113,0.25); }
        .tasbeeh-presets { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin: 18px 0; }
        .tasbeeh-preset {
            padding: 8px 16px; border-radius: 12px; border: 1px solid rgba(46,204,113,0.25);
            background: rgba(255,255,255,0.04); color: var(--text-muted); cursor: pointer;
            font-family: 'Amiri', serif; font-size: 1.05em; transition: all 0.3s;
        }
        .tasbeeh-preset:hover, .tasbeeh-preset.active { background: rgba(46,204,113,0.15); color: var(--gold-soft); border-color: var(--gold-bright); }
        .tasbeeh-target { color: var(--text-muted); font-size: 1.1em; margin: 8px 0; }
        .tasbeeh-controls { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
        .tasbeeh-ctrl-btn {
            padding: 8px 20px; border-radius: 10px; border: 1px solid rgba(46,204,113,0.25);
            background: rgba(255,255,255,0.05); color: var(--gold-soft); cursor: pointer;
            font-family: 'Amiri', serif; font-size: 1.05em; transition: all 0.3s;
        }
        .tasbeeh-ctrl-btn:hover { background: rgba(46,204,113,0.15); }

        /* 99 Names grid */
        .names-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
        .name-card {
            text-align: center; padding: 18px; border-radius: 14px;
            background: linear-gradient(135deg, rgba(26,37,64,0.95), rgba(18,26,46,0.98));
            border: 1px solid rgba(212,175,55,0.12); transition: all 0.3s;
        }
        .name-card:hover { border-color: rgba(46,204,113,0.3); transform: translateY(-2px); }
        .name-card-ar { font-family: 'Scheherazade New', serif; font-size: 1.8em; color: var(--gold-bright); margin-bottom: 4px; }
        .name-card-meaning { font-size: 0.95em; color: var(--text-muted); }

        /* Content Wrapper */
        .content-wrapper {
            padding: 30px 40px;
            background: linear-gradient(180deg,
                rgba(26, 37, 64, 0.95) 0%,
                rgba(18, 26, 46, 0.98) 100%);
            min-height: 100vh;
        }

        .content-area {
            display: none;
            animation: fadeInUp 0.6s ease;
        }

        .content-area.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Section Title */
        .section-title {
            font-family: 'Scheherazade New', serif;
            font-size: 3.2em;
            color: var(--gold-bright);
            margin-bottom: 25px;
            padding-bottom: 20px;
            text-align: center;
            font-weight: 600;
            letter-spacing: 0.04em;
            position: relative;
            text-shadow: 0 0 20px rgba(46, 204, 113, 0.4);
        }

        .section-title::after {
            content: '❋ ❋ ❋';
            display: block;
            margin-top: 15px;
            font-size: 0.4em;
            color: var(--gold-warm);
            letter-spacing: 0.5em;
            opacity: 0.7;
        }

        /* Dua Cards - Main Prayer Cards */
        .dua-card {
            background: linear-gradient(135deg,
                rgba(250, 246, 237, 0.97) 0%,
                rgba(255, 254, 249, 0.99) 100%);
            padding: 25px 30px;
            margin-bottom: 20px;
            border-radius: 16px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-card);
            border: 1px solid rgba(46, 204, 113, 0.2);
        }

        .dua-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--gold-bright), var(--gold-warm));
            border-radius: 0 16px 16px 0;
        }

        .dua-card::after {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50 0L61.8 38.2L100 50L61.8 61.8L50 100L38.2 61.8L0 50L38.2 38.2Z' fill='%232ecc71' fill-opacity='0.15'/%3E%3C/svg%3E");
            background-size: contain;
            opacity: 0.5;
        }

        .dua-card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 8px 30px rgba(46, 204, 113, 0.2),
                        0 4px 15px rgba(0, 0, 0, 0.1);
            border-color: rgba(46, 204, 113, 0.4);
        }

        .dua-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--gold-warm) 0%, var(--gold-bright) 100%);
            color: var(--night-deep);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(46, 204, 113, 0.4);
        }

        .dua-counter {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--emerald-soft) 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 1.1em;
            margin-right: 10px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(45, 90, 74, 0.3);
        }

        .dua-counter::before {
            content: "×";
            margin-left: 5px;
            opacity: 0.8;
        }

        .dua-text {
            font-family: 'Scheherazade New', 'Amiri', serif;
            font-size: 2em;
            line-height: 2.6;
            color: #1a5c3a;
            margin: 15px 0;
            font-weight: 500;
            padding: 15px 20px;
            background: rgba(46, 204, 113, 0.05);
            border-radius: 12px;
            letter-spacing: 0.03em;
            text-rendering: optimizeLegibility;
            position: relative;
        }

        .dua-text::first-line {
            color: var(--gold-warm);
        }

        .dua-source {
            font-size: 0.85em;
            color: var(--text-muted);
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(46,204,113,0.1);
        }
        .dua-source strong {
            color: var(--gold-warm);
        }

        .benefits {
            display: none;
        }

        /* Quran Verses - Special Styling */
        .quran-verse {
            background: linear-gradient(135deg,
                rgba(18, 26, 46, 0.98) 0%,
                rgba(26, 37, 64, 0.98) 100%);
            padding: 30px 35px;
            margin-bottom: 25px;
            border-radius: 20px;
            line-height: 2.8;
            font-family: 'Scheherazade New', serif;
            font-size: 2em;
            color: var(--gold-soft);
            text-align: right;
            font-weight: 400;
            letter-spacing: 0.04em;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3),
                        inset 0 0 100px rgba(46, 204, 113, 0.05);
            border: 2px solid rgba(46, 204, 113, 0.3);
        }

        .quran-verse::before {
            content: '﴾';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3em;
            color: var(--gold-warm);
            opacity: 0.15;
            font-family: 'Scheherazade New', serif;
        }

        .quran-verse::after {
            content: '﴿';
            position: absolute;
            bottom: 20px;
            left: 20px;
            font-size: 3em;
            color: var(--gold-warm);
            opacity: 0.15;
            font-family: 'Scheherazade New', serif;
        }

        .quran-verse:hover {
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4),
                        inset 0 0 120px rgba(46, 204, 113, 0.08),
                        0 0 30px rgba(46, 204, 113, 0.15);
            border-color: rgba(46, 204, 113, 0.5);
        }

        .verse-num {
            display: inline-block;
            color: var(--gold-bright);
            font-weight: bold;
            font-size: 1em;
            padding: 8px 16px;
            background: rgba(46, 204, 113, 0.15);
            border-radius: 8px;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(46, 204, 113, 0.5);
        }

        /* Section Headings */
        .section-heading {
            font-family: 'Scheherazade New', serif;
            font-size: 2.4em;
            color: var(--gold-warm);
            margin-top: 40px;
            margin-bottom: 25px;
            font-weight: 600;
            letter-spacing: 0.03em;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .section-heading::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg,
                transparent,
                var(--gold-warm),
                transparent);
        }

        /* Info Boxes */
        .intro-box {
            background: linear-gradient(135deg,
                rgba(45, 90, 74, 0.95) 0%,
                rgba(58, 122, 100, 0.95) 100%);
            padding: 25px 30px;
            border-radius: 16px;
            margin-bottom: 25px;
            line-height: 2.2;
            font-size: 1.6em;
            color: var(--cream);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(45, 90, 74, 0.3);
            border: 1px solid rgba(46, 204, 113, 0.2);
        }

        .intro-box::before {
            content: '✦';
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 1.5em;
            color: var(--gold-bright);
            opacity: 0.4;
        }

        .intro-box strong {
            color: var(--gold-soft);
            font-size: 1.1em;
            font-weight: 600;
            display: block;
            margin-bottom: 10px;
        }

        /* Benefits List */
        .benefits-list {
            margin-top: 15px;
            margin-right: 25px;
            list-style: none;
        }

        .benefits-list li {
            margin-bottom: 12px;
            line-height: 2;
            font-size: 1em;
            font-weight: 400;
            color: var(--cream-soft);
            position: relative;
            padding-right: 30px;
        }

        .benefits-list li::before {
            content: '✧';
            position: absolute;
            right: 0;
            color: var(--gold-bright);
            font-size: 0.9em;
        }

        .benefits-list li strong {
            color: var(--gold-soft);
            display: inline;
            font-size: 1em;
        }

        /* Custom Scrollbar - applies to full page scroll */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--night-mid);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--gold-warm), var(--gold-bright));
            border-radius: 5px;
            border: 2px solid var(--night-mid);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gold-bright);
        }

        /* Counter Display */
        .counter-display {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--emerald);
            font-size: 1.3em;
            margin-top: 10px;
            font-weight: 600;
        }

        .counter-display .dua-counter {
            background: linear-gradient(135deg, var(--emerald) 0%, var(--emerald-soft) 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.8em;
            }

            .header p {
                font-size: 1.3em;
            }

            .tabs-nav {
                padding: 8px 10px;
                gap: 8px;
            }

            .tabs-nav button {
                min-width: 120px;
                padding: 15px 18px;
                font-size: 1.3em;
            }

            .content-wrapper {
                padding: 20px;
            }

            .section-title {
                font-size: 2.4em;
            }

            .dua-card {
                padding: 20px;
            }

            .dua-text {
                font-size: 1.6em;
                padding: 12px 15px;
            }

            .quran-verse {
                font-size: 1.6em;
                padding: 20px 25px;
            }

            .intro-box {
                font-size: 1.4em;
                padding: 20px;
            }
        }

        /* Breathing Animation for Focus */
        @keyframes breathe {
            0%, 100% { box-shadow: 0 4px 20px rgba(46, 204, 113, 0.1); }
            50% { box-shadow: 0 4px 30px rgba(46, 204, 113, 0.25); }
        }

        .dua-card:focus-within {
            animation: breathe 3s ease-in-out infinite;
        }

        /* Selection Styling */
        ::selection {
            background: var(--gold-warm);
            color: var(--night-deep);
        }

        ::-moz-selection {
            background: var(--gold-warm);
            color: var(--night-deep);
        }

        /* Scroll to Top Button */
        .scroll-top-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--gold-warm) 0%, var(--gold-bright) 100%);
            color: var(--night-deep);
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scroll-top-btn.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .scroll-top-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(46, 204, 113, 0.6);
        }

        .scroll-top-btn:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .scroll-top-btn {
                bottom: 20px;
                left: 20px;
                width: 44px;
                height: 44px;
                font-size: 1.3em;
            }
        }

        /* ═══════════════════════════════════════ */
        /* Habits Tracker Styles */
        /* ═══════════════════════════════════════ */
        .habits-section-label {
            font-family: 'Scheherazade New', serif;
            font-size: 2.2em;
            color: var(--gold-bright);
            margin: 35px 0 20px;
            text-align: center;
            font-weight: 600;
            position: relative;
            padding-bottom: 12px;
        }

        .habits-section-label::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold-warm), transparent);
        }

        .habit-item {
            background: linear-gradient(135deg,
                rgba(250, 246, 237, 0.97) 0%,
                rgba(255, 254, 249, 0.99) 100%);
            padding: 18px 24px;
            margin-bottom: 12px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            transition: all 0.3s ease;
            border: 1px solid rgba(46, 204, 113, 0.2);
            box-shadow: var(--shadow-card);
        }

        .habit-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(46, 204, 113, 0.15);
            border-color: rgba(46, 204, 113, 0.4);
        }

        .habit-item.completed {
            opacity: 0.55;
            background: linear-gradient(135deg,
                rgba(46, 204, 113, 0.12) 0%,
                rgba(46, 204, 113, 0.06) 100%);
            border-color: var(--gold-bright);
        }

        .habit-item.completed .habit-name {
            text-decoration: line-through;
            color: var(--text-muted);
        }

        .habit-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .habit-name {
            font-family: 'Amiri', serif;
            font-size: 1.45em;
            color: #1a5c3a;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .habit-schedule {
            font-size: 1.05em;
            color: #888;
            font-family: 'Amiri', serif;
        }

        .habit-check {
            position: relative;
        }

        .habit-check input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 34px;
            height: 34px;
            border: 2px solid var(--gold-warm);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .habit-check input[type="checkbox"]:checked {
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            border-color: var(--gold-bright);
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.4);
        }

        .habit-check input[type="checkbox"]::after {
            content: '✓';
            color: transparent;
            font-size: 1.1em;
            font-weight: bold;
            transition: color 0.2s ease;
        }

        .habit-check input[type="checkbox"]:checked::after {
            color: white;
        }

        .weekly-tracker {
            background: linear-gradient(135deg,
                rgba(18, 26, 46, 0.98) 0%,
                rgba(26, 37, 64, 0.98) 100%);
            border-radius: 20px;
            padding: 25px 20px;
            margin: 30px 0;
            border: 2px solid rgba(46, 204, 113, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .weekly-tracker h3 {
            font-family: 'Scheherazade New', serif;
            font-size: 1.8em;
            color: var(--gold-bright);
            text-align: center;
            margin-bottom: 20px;
        }

        .week-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            text-align: center;
        }

        .week-grid .day-header {
            font-family: 'Amiri', serif;
            font-size: 1.15em;
            color: var(--gold-soft);
            padding: 8px 4px;
            font-weight: 600;
        }

        .week-grid .day-cell {
            aspect-ratio: 1;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(46, 204, 113, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .week-grid .day-cell:hover {
            border-color: rgba(46, 204, 113, 0.5);
            background: rgba(46, 204, 113, 0.1);
        }

        .week-grid .day-cell.today {
            border-color: var(--gold-bright);
            box-shadow: 0 0 15px rgba(46, 204, 113, 0.3);
            color: var(--gold-bright);
            font-weight: bold;
        }

        .week-grid .day-cell.done {
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            color: var(--night-deep);
            font-weight: bold;
            border-color: var(--gold-bright);
        }

        .habits-controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .habits-btn {
            font-family: 'Amiri', serif;
            font-size: 1.25em;
            padding: 12px 26px;
            border-radius: 12px;
            border: 1px solid rgba(46, 204, 113, 0.3);
            background: rgba(46, 204, 113, 0.1);
            color: var(--gold-soft);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .habits-btn:hover {
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            color: var(--night-deep);
            border-color: var(--gold-bright);
            box-shadow: var(--glow-gold);
        }

        /* === Enhanced Quran Browser === */
        .s-list.off { display: none; }
        .s-reader2 { display: none; }
        .s-reader2.on { display: block; }
        .quran-search {
            width: 100%; padding: 14px 20px; border-radius: 12px;
            border: 1px solid rgba(212,175,55,0.25); background: rgba(255,255,255,0.05);
            color: var(--text-light); font-family: 'Amiri', serif; font-size: 1.2em;
            outline: none; transition: all 0.3s; margin-bottom: 18px;
        }
        .quran-search::placeholder { color: var(--text-muted); }
        .quran-search:focus { border-color: var(--gold-bright); box-shadow: 0 0 15px rgba(46,204,113,0.15); }
        .surah-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 12px;
        }
        .surah-card {
            position: relative; background: linear-gradient(135deg, rgba(26,37,64,0.95), rgba(18,26,46,0.98));
            border: 1px solid rgba(212,175,55,0.15); border-radius: 14px;
            padding: 18px 20px; cursor: pointer; transition: all 0.3s;
            display: flex; align-items: center; gap: 14px;
        }
        .surah-card:hover { border-color: rgba(46,204,113,0.4); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
        .surah-card.highlighted { border-color: rgba(212,175,55,0.5); background: linear-gradient(135deg, rgba(45,40,20,0.95), rgba(30,28,18,0.98)); box-shadow: 0 0 18px rgba(212,175,55,0.12); }
        .surah-card.highlighted .surah-card-num { background: linear-gradient(135deg, #d4af37, #f0c040); }
        .surah-hl-btn {
            position: absolute; top: 8px; left: 8px; width: 30px; height: 30px; border-radius: 50%;
            border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-size: 0.85em; transition: all 0.2s; z-index: 2;
            background: rgba(255,255,255,0.06); color: var(--text-muted);
        }
        .surah-hl-btn:hover { background: rgba(212,175,55,0.2); color: var(--gold-soft); }
        .surah-hl-btn.on { background: rgba(212,175,55,0.25); color: var(--gold-bright); }
        .surah-card-num {
            min-width: 44px; height: 44px; display: flex; align-items: center; justify-content: center;
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            color: var(--night-deep); border-radius: 50%; font-weight: bold; font-size: 1.1em; flex-shrink: 0;
        }
        .surah-card-info { flex: 1; min-width: 0; }
        .surah-card-name {
            font-family: 'Scheherazade New', 'Amiri', serif; font-size: 1.35em;
            color: var(--text-light); font-weight: 600; margin-bottom: 2px;
        }
        .surah-card-meta { font-size: 0.95em; color: var(--text-muted); display: flex; align-items: center; gap: 8px; }
        .surah-card-type {
            display: inline-block; padding: 2px 10px; border-radius: 8px; font-size: 0.9em;
        }
        .surah-card-type.meccan { background: rgba(46,204,113,0.15); color: var(--gold-soft); }
        .surah-card-type.medinan { background: rgba(52,152,219,0.15); color: #85c1e9; }
        .last-read-card {
            background: linear-gradient(135deg, rgba(45,90,74,0.95), rgba(58,122,100,0.95));
            padding: 18px 24px; border-radius: 14px; margin-bottom: 20px;
            cursor: pointer; transition: all 0.3s; border: 1px solid rgba(212,175,55,0.3);
            display: flex; align-items: center; gap: 15px;
        }
        .last-read-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(45,90,74,0.4); }
        .bookmarks-bar { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 18px; }
        .bm-chip {
            background: rgba(212,175,55,0.12); border: 1px solid rgba(212,175,55,0.25);
            padding: 7px 14px; border-radius: 18px; cursor: pointer; transition: all 0.3s;
            font-family: 'Amiri', serif; font-size: 1.05em; color: var(--gold-soft);
            display: flex; align-items: center; gap: 6px;
        }
        .bm-chip:hover { background: rgba(212,175,55,0.22); transform: translateY(-1px); }
        .bm-chip .bm-x { opacity: 0.5; cursor: pointer; font-size: 0.85em; }
        .bm-chip .bm-x:hover { opacity: 1; color: #e74c3c; }
        .q-filters2 { display: flex; gap: 8px; margin-bottom: 22px; flex-wrap: wrap; }
        .q-filter2 {
            padding: 9px 18px; border-radius: 10px; border: 1px solid rgba(212,175,55,0.2);
            background: rgba(255,255,255,0.03); color: var(--text-muted);
            font-family: 'Amiri', serif; font-size: 1.15em; cursor: pointer; transition: all 0.3s;
        }
        .q-filter2:hover { background: rgba(212,175,55,0.1); color: var(--gold-soft); }
        .q-filter2.on { background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright)); color: var(--night-deep); border-color: var(--gold-bright); }
        .r-head2 { display: flex; align-items: center; justify-content: space-between; margin-bottom: 22px; flex-wrap: wrap; gap: 12px; }
        .r-btn2 {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 10px 18px; border-radius: 10px;
            border: 1px solid rgba(212,175,55,0.25); background: rgba(255,255,255,0.05);
            color: var(--gold-soft); font-family: 'Amiri', serif; font-size: 1.15em;
            cursor: pointer; transition: all 0.3s;
        }
        .r-btn2:hover { background: rgba(212,175,55,0.12); }
        .r-btn2:disabled { opacity: 0.3; cursor: not-allowed; }
        .r-btn2.bm-on { background: rgba(212,175,55,0.18); border-color: var(--gold-bright); color: var(--gold-bright); }
        .r-title2 { text-align: center; flex: 1; min-width: 200px; }
        .r-title2 h3 { font-family: 'Scheherazade New', serif; font-size: 2.4em; color: var(--gold-bright); text-shadow: 0 0 18px rgba(212,175,55,0.35); }
        .r-title2 .r-meta2 { color: var(--text-muted); font-size: 1.05em; margin-top: 4px; }
        .r-nav2 { display: flex; gap: 8px; }
        .bismillah-box2 {
            text-align: center; font-family: 'Scheherazade New', serif; font-size: 2.1em;
            color: var(--gold-soft); padding: 22px;
            background: linear-gradient(135deg, rgba(18,26,46,0.98), rgba(26,37,64,0.98));
            border-radius: 14px; border: 1px solid rgba(212,175,55,0.18); margin-bottom: 18px;
        }
        .surah-para {
            background: linear-gradient(135deg, rgba(250,246,237,0.97), rgba(255,254,249,0.99));
            padding: 28px 30px; border-radius: 14px;
            border: 1px solid rgba(212,175,55,0.12);
            font-family: 'Scheherazade New', 'Amiri', serif;
            font-size: 1.8em; line-height: 2.4; color: var(--text-dark);
            text-align: justify; word-spacing: 2px;
        }
        .ayah-span { transition: background 0.3s; border-radius: 4px; padding: 0 2px; cursor: pointer; }
        .ayah-span.selected { background: rgba(46, 204, 113, 0.22); }
        .ayah-span.lr-hl { background: rgba(46, 204, 113, 0.15); }
        .ayah-span.bm-hl { background: rgba(212, 175, 55, 0.18); }
        .ayah-popup {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(80px);
            background: linear-gradient(135deg, var(--night-soft), var(--night-mid));
            border: 1px solid rgba(212,175,55,0.35); border-radius: 16px;
            padding: 12px 18px; display: flex; align-items: center; gap: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.5); z-index: 998;
            opacity: 0; pointer-events: none; transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
        }
        .ayah-popup.show { opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0); }
        .ayah-popup-text { color: var(--text-light); font-family: 'Amiri', serif; font-size: 1.1em; white-space: nowrap; }
        .ayah-popup-btn {
            padding: 8px 16px; border-radius: 10px; border: none; cursor: pointer;
            font-family: 'Amiri', serif; font-size: 1.05em; transition: all 0.2s; white-space: nowrap;
        }
        .ayah-popup-btn.save {
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            color: var(--night-deep); font-weight: 600;
        }
        .ayah-popup-btn.save:hover { box-shadow: var(--glow-gold); }
        .ayah-popup-btn.resume {
            background: rgba(46,204,113,0.15); color: var(--gold-soft);
            border: 1px solid rgba(46,204,113,0.3);
        }
        .ayah-popup-btn.resume:hover { background: rgba(46,204,113,0.25); }
        .ayah-popup-btn.close {
            background: rgba(255,255,255,0.08); color: var(--text-muted);
            padding: 8px 12px;
        }
        .ayah-popup-btn.close:hover { background: rgba(255,255,255,0.15); }
        .ayah-num-inline {
            display: inline; font-size: 0.65em; color: var(--gold-warm);
            cursor: pointer; margin: 0 4px; font-weight: bold;
            transition: color 0.3s; vertical-align: middle; user-select: none;
        }
        .ayah-num-inline:hover { color: var(--gold-bright); }
        .ayah-num-inline.on { color: var(--gold-bright); text-shadow: 0 0 8px rgba(46,204,113,0.5); }

        /* Tafseer Panel */
        .tafseer-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1000;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .tafseer-overlay.show { opacity: 1; pointer-events: auto; }
        .tafseer-panel {
            position: fixed; bottom: 0; left: 0; right: 0; z-index: 1001;
            max-height: 75vh; background: linear-gradient(180deg, var(--night-soft), var(--night-deep));
            border-top: 2px solid rgba(212,175,55,0.4);
            border-radius: 24px 24px 0 0; padding: 0;
            transform: translateY(100%); transition: transform 0.35s cubic-bezier(0.4,0,0.2,1);
            display: flex; flex-direction: column;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }
        .tafseer-panel.show { transform: translateY(0); }
        .tafseer-header {
            padding: 16px 20px 12px; display: flex; align-items: center; gap: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.08); flex-shrink: 0;
        }
        .tafseer-title {
            flex: 1; font-family: 'Amiri', serif; font-size: 1.2em;
            color: var(--gold-soft); font-weight: 600;
        }
        .tafseer-close {
            background: rgba(255,255,255,0.08); border: none; color: var(--text-muted);
            width: 36px; height: 36px; border-radius: 50%; cursor: pointer;
            font-size: 1.2em; display: flex; align-items: center; justify-content: center;
            transition: background 0.2s;
        }
        .tafseer-close:hover { background: rgba(255,255,255,0.15); }
        .tafseer-tabs {
            display: flex; gap: 6px; padding: 10px 20px;
            overflow-x: auto; flex-shrink: 0; scrollbar-width: none;
        }
        .tafseer-tabs::-webkit-scrollbar { display: none; }
        .tafseer-tab {
            padding: 7px 14px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.12);
            background: transparent; color: var(--text-muted); cursor: pointer;
            font-family: 'Amiri', serif; font-size: 0.95em; white-space: nowrap;
            transition: all 0.2s;
        }
        .tafseer-tab.active {
            background: linear-gradient(135deg, var(--gold-warm), var(--gold-bright));
            color: var(--night-deep); border-color: transparent; font-weight: 600;
        }
        .tafseer-tab:hover:not(.active) { border-color: rgba(212,175,55,0.3); color: var(--gold-soft); }
        .tafseer-body {
            padding: 20px; overflow-y: auto; flex: 1;
            font-family: 'Amiri', serif; font-size: 1.25em; line-height: 2.2;
            color: var(--cream-soft); direction: rtl;
        }
        .tafseer-body .tafseer-loading {
            text-align: center; padding: 40px; color: var(--text-muted); font-size: 0.9em;
        }
        .tafseer-ayah-text {
            background: rgba(212,175,55,0.08); border-right: 3px solid var(--gold-warm);
            padding: 12px 16px; margin-bottom: 16px; border-radius: 0 8px 8px 0;
            font-size: 1.05em; color: var(--gold-soft);
        }
        .ayah-popup-btn.tafseer {
            background: rgba(52,152,219,0.15); color: #85c1e9;
            border: 1px solid rgba(52,152,219,0.3);
        }
        .ayah-popup-btn.tafseer:hover { background: rgba(52,152,219,0.25); }
        .offline-progress {
            margin-bottom: 18px; padding: 14px 18px;
            background: rgba(18,26,46,0.8); border-radius: 12px;
            border: 1px solid rgba(212,175,55,0.2);
        }
        .offline-bar {
            width: 100%; height: 10px; background: rgba(255,255,255,0.08);
            border-radius: 6px; overflow: hidden; margin-bottom: 8px;
        }
        .offline-fill {
            height: 100%; width: 0%; border-radius: 6px;
            background: linear-gradient(90deg, var(--gold-warm), var(--gold-bright));
            transition: width 0.3s;
        }
        .offline-label { color: var(--text-muted); font-size: 1em; text-align: center; font-family: 'Amiri', serif; }
        .q-loading2 { text-align: center; padding: 50px; color: var(--gold-soft); font-size: 1.4em; }
        .q-spinner2 { display: block; width: 36px; height: 36px; margin: 18px auto;
            border: 3px solid rgba(212,175,55,0.18); border-top-color: var(--gold-bright);
            border-radius: 50%; animation: qspin2 0.8s linear infinite; }
        @keyframes qspin2 { to { transform: rotate(360deg); } }
        @media (max-width: 768px) {
            .r-head2 { flex-direction: column; align-items: stretch; text-align: center; }
            .r-title2 h3 { font-size: 1.9em; }
            .r-nav2 { justify-content: center; }
            .surah-para { font-size: 1.5em; padding: 20px 18px; }
            .surah-grid { grid-template-columns: 1fr; }
            .surah-card-name { font-size: 1.2em; }
        }
    </style>
</head>
<body>

<!-- Animated Stars Background -->
<div class="stars-container" id="stars"></div>

<!-- Islamic Pattern Overlay -->
<div class="pattern-overlay"></div>

<!-- Scroll to Top Button -->
<button class="scroll-top-btn" id="scrollTopBtn" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="العودة للأعلى">↑</button>

<!-- Ayah Action Popup -->
<div class="ayah-popup" id="ayahPopup">
    <span class="ayah-popup-text" id="ayahPopupLabel"></span>
    <button class="ayah-popup-btn tafseer" onclick="openTafseer()">تفسير</button>
    <button class="ayah-popup-btn save" id="ayahPopupSave" onclick="saveSelectedAyah()">حفظ 🔖</button>
    <button class="ayah-popup-btn resume" id="ayahPopupResume" onclick="resumeFromSelected()">متابعة من هنا</button>
    <button class="ayah-popup-btn close" onclick="hideAyahPopup()">✕</button>
</div>

<!-- Tafseer Panel -->
<div class="tafseer-overlay" id="tafseerOverlay" onclick="closeTafseer()"></div>
<div class="tafseer-panel" id="tafseerPanel">
    <div class="tafseer-header">
        <div class="tafseer-title" id="tafseerTitle">تفسير</div>
        <button class="tafseer-close" onclick="closeTafseer()">✕</button>
    </div>
    <div class="tafseer-tabs" id="tafseerTabs">
        <button class="tafseer-tab active" onclick="switchTafseer('ar-tafseer-al-saddi',this)">السعدي</button>
        <button class="tafseer-tab" onclick="switchTafseer('ar-tafsir-ibn-kathir',this)">ابن كثير</button>
        <button class="tafseer-tab" onclick="switchTafseer('ar-tafsir-muyassar',this)">الميسر</button>
        <button class="tafseer-tab" onclick="switchTafseer('ar-tafseer-al-qurtubi',this)">القرطبي</button>
        <button class="tafseer-tab" onclick="switchTafseer('ar-tafsir-al-baghawi',this)">البغوي</button>
        <button class="tafseer-tab" onclick="switchTafseer('ar-tafsir-al-tabari',this)">الطبري</button>
    </div>
    <div class="tafseer-body" id="tafseerBody">
        <div class="tafseer-loading">اختر آية لعرض التفسير</div>
    </div>
</div>

<div class="container">
    <div class="header">
        <h1>📖 أذكار وأدعية إسلامية شاملة</h1>
        <div class="ornament">
            <span class="ornament-line"></span>
            <span class="ornament-symbol">❋</span>
            <span class="ornament-line"></span>
        </div>
        <p>رفيقك الإسلامي الشامل - Complete Muslim Companion</p>
    </div>

    <div class="tabs-nav">
        <button class="tab-btn active" onclick="switchTab('tabHome', this)">🏠 الرئيسية</button>
        <button class="tab-btn" onclick="switchTab('tabAthkar', this)">🤲 الأذكار</button>
        <button class="tab-btn" onclick="switchTab('tabDuas', this)">📿 الأدعية</button>
        <button class="tab-btn" onclick="switchTab('tab7', this)">📖 القرآن</button>
        <button class="tab-btn" onclick="switchTab('tabTools', this)">🛠️ أدوات</button>
    </div>

    <div class="content-wrapper">
        <!-- HOME TAB -->
        <div id="tabHome" class="content-area active">
            <h2 class="section-title">بسم الله الرحمن الرحيم</h2>
            <div id="hijriDate" style="text-align:center;font-size:1.3em;color:var(--gold-soft);margin-bottom:20px;font-family:'Scheherazade New',serif"></div>

            <!-- Event Countdowns -->
            <div class="event-countdowns" id="eventCountdowns">
                <div class="event-card" id="eventRamadan">
                    <div class="event-card-icon">🌙</div>
                    <div class="event-card-name">رمضان</div>
                    <div class="event-card-days" id="ramadanDays">--</div>
                    <div class="event-card-label" id="ramadanLabel">يوم متبقي</div>
                    <div class="event-card-date" id="ramadanDate"></div>
                </div>
                <div class="event-card" id="eventFitr">
                    <div class="event-card-icon">🎉</div>
                    <div class="event-card-name">عيد الفطر</div>
                    <div class="event-card-days" id="fitrDays">--</div>
                    <div class="event-card-label" id="fitrLabel">يوم متبقي</div>
                    <div class="event-card-date" id="fitrDate"></div>
                </div>
                <div class="event-card" id="eventAdha">
                    <div class="event-card-icon">🕋</div>
                    <div class="event-card-name">عيد الأضحى</div>
                    <div class="event-card-days" id="adhaDays">--</div>
                    <div class="event-card-label" id="adhaLabel">يوم متبقي</div>
                    <div class="event-card-date" id="adhaDate"></div>
                </div>
            </div>

            <!-- Live Prayer Countdown -->
            <div class="live-countdown-bar" id="liveCountdownBar">
                <div class="countdown-next-label">الصلاة القادمة</div>
                <div class="countdown-next-name" id="nextPrayerName">--</div>
                <div class="countdown-next-timer" id="nextPrayerTimer">--:--:--</div>
                <div class="countdown-fasting" id="fastingInfo">
                    <div class="fasting-item">
                        <div class="fasting-label">مدة الصيام</div>
                        <div class="fasting-value" id="fastingDuration">--</div>
                    </div>
                    <div class="fasting-item">
                        <div class="fasting-label">باقي للمغرب</div>
                        <div class="fasting-value" id="maghribRemaining">--</div>
                    </div>
                    <div class="fasting-item">
                        <div class="fasting-label">باقي للفجر</div>
                        <div class="fasting-value" id="fajrRemaining">--</div>
                    </div>
                </div>
            </div>

            <div class="home-grid">
                <div class="home-card" onclick="switchTab('tabAthkar',document.querySelectorAll('.tab-btn')[1])">
                    <div class="home-card-icon">🤲</div>
                    <div class="home-card-title">الأذكار</div>
                    <div class="home-card-desc">أذكار الاستيقاظ والصباح والمساء والنوم وبعد الصلاة</div>
                </div>
                <div class="home-card" onclick="switchTab('tabDuas',document.querySelectorAll('.tab-btn')[2])">
                    <div class="home-card-icon">📿</div>
                    <div class="home-card-title">الأدعية</div>
                    <div class="home-card-desc">أدعية الرزق والأدعية القرآنية والرقية الشرعية</div>
                </div>
                <div class="home-card" onclick="switchTab('tab7',document.querySelectorAll('.tab-btn')[3])">
                    <div class="home-card-icon">📖</div>
                    <div class="home-card-title">القرآن الكريم</div>
                    <div class="home-card-desc">تصفح جميع السور مع حفظ موضع القراءة</div>
                </div>
                <div class="home-card" onclick="switchTab('tabTools',document.querySelectorAll('.tab-btn')[4])">
                    <div class="home-card-icon">🛠️</div>
                    <div class="home-card-title">أدوات</div>
                    <div class="home-card-desc">مواقيت الصلاة وعداد التسبيح وأسماء الله الحسنى</div>
                </div>
            </div>

            <div class="section-title" style="font-size:1.6em;margin-top:30px">آية اليوم</div>
            <div class="dua-card" id="dailyAyah" style="text-align:center">
                <div class="dua-text" id="dailyAyahText" style="font-size:1.5em;line-height:2.2">جاري التحميل...</div>
                <div class="dua-source" id="dailyAyahRef"></div>
            </div>

            <div class="section-title" style="font-size:1.6em;margin-top:20px">مواقيت الصلاة</div>
            <div class="prayer-grid" id="homePrayerGrid">
                <div class="prayer-card"><div class="prayer-card-name">الفجر</div><div class="prayer-card-time" id="homeFajr">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">الشروق</div><div class="prayer-card-time" id="homeSunrise">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">الظهر</div><div class="prayer-card-time" id="homeDhuhr">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">العصر</div><div class="prayer-card-time" id="homeAsr">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">المغرب</div><div class="prayer-card-time" id="homeMaghrib">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">العشاء</div><div class="prayer-card-time" id="homeIsha">--:--</div></div>
            </div>
        </div>

        <!-- ATHKAR TAB (all athkar consolidated) -->
        <div id="tabAthkar" class="content-area">
            <h2 class="section-title">الأذكار</h2>
            <div class="sub-nav">
                <button class="sub-nav-btn active" onclick="switchSub('tabAthkar','athkar-wake',this)">الاستيقاظ</button>
                <button class="sub-nav-btn" onclick="switchSub('tabAthkar','athkar-morning',this)">الصباح</button>
                <button class="sub-nav-btn" onclick="switchSub('tabAthkar','athkar-evening',this)">المساء</button>
                <button class="sub-nav-btn" onclick="switchSub('tabAthkar','athkar-sleep',this)">النوم</button>
                <button class="sub-nav-btn" onclick="switchSub('tabAthkar','athkar-prayer',this)">بعد الصلاة</button>
            </div>

            <!-- Sub: Wake up athkar (existing tab1 content) -->
            <div id="athkar-wake" class="sub-section active">
            <h2 class="section-title">أذكار الاستيقاظ من النوم</h2>

            <div class="dua-card">
                <div class="dua-number">1</div>
                <div class="dua-text">الحمد لله الذي أحيانا بعد ما أماتنا، وإليه النشور</div>
                <div class="dua-source"><strong>المصدر:</strong> صحيح البخاري مع الفتح، ١١/ ١١٣، برقم ٦٣١٤، وصحيح مسلم، ٤/ ٢٠٨٣، برقم ٢٧١١</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">2</div>
                <div class="dua-text">لا إله إلا الله وحده لا شريك له، له الملك وله الحمد، وهو على كل شيء قدير، سبحان الله، والحمد لله، ولا إله إلا الله، والله أكبر، ولا حول ولا قوة إلا بالله العلي العظيم، رب اغفر لي</div>
                <div class="benefits">
                    <strong>الفائدة:</strong> من قال ذلك غُفِرَ له، فإن دعا استجيب له، فإن قام فتوضأ ثم صلى قُبلت صلاته
                </div>
                <div class="dua-source"><strong>المصدر:</strong> البخاري مع الفتح، ٣/ ٣٩، برقم ١١٥٤، وابن ماجه</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">3</div>
                <div class="dua-text">الحمد لله الذي عافاني في جسدي، ورد علي روحي، وأذن لي بذكره</div>
                <div class="dua-source"><strong>المصدر:</strong> سنن الترمذي، ٥/ ٤٧٣، برقم ٣٤٠١</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">4</div>
                <div class="dua-text">﴿إن في خلق السموات والأرض واختلاف الليل والنهار لآيات لأولي الألباب * الذين يذكرون الله قياما وقعودا وعلى جنوبهم ويتفكرون في خلق السموات والأرض ربنا ما خلقت هذا باطلا سبحانك فقنا عذاب النار* ربنا إنك من تدخل النار فقد أخزيته وما للظالمين من أنصار* ربنا إننا سمعنا مناديا ينادي للإيمان أن آمنوا بربكم فآمنا ربنا فاغفر لنا ذنوبنا وكفر عنا سيئاتنا وتوفنا مع الأبرار* ربنا وآتنا ما وعدتنا على رسلك ولا تخزنا يوم القيامة إنك لا تخلف الميعاد* فاستجاب لهم ربهم أني لا أضيع عمل عامل منكم من ذكر أو أنثى بعضكم من بعض فالذين هاجروا وأخرجوا من ديارهم وأوذوا في سبيلي وقاتلوا وقتلوا لأكفرن عنهم سيئاتهم ولأدخلنهم جنات تجري من تحتها الأنهار ثوابا من عند الله والله عنده حسن الثواب * لا يغرنك تقلب الذين كفروا في البلاد * متاع قليل ثم مأواهم جهنم وبئس المهاد * لكن الذين اتقوا ربهم لهم جنات تجري من تحتها الأنهار خالدين فيها نزلا من عند الله وما عند الله خير للأبرار * وإن من أهل الكتاب لمن يؤمن بالله وما أنزل إليكم ومآ أنزل إليهم خاشعين لله لا يشترون بآيات الله ثمنا قليلا أولئك لهم أجرهم عند ربهم إن الله سريع الحساب*يا أيها الذين آمنوا اصبروا وصابروا ورابطوا واتقوا الله لعلكم تفلحون﴾</div>
                <div class="dua-source"><strong>المصدر:</strong> آيات من سورة آل عمران (190-200)، البخاري ومسلم</div>
            </div>
            </div><!-- end athkar-wake -->

            <!-- Sub: Morning athkar (existing tab2 content) -->
            <div id="athkar-morning" class="sub-section">
            <h2 class="section-title">أذكار الصباح</h2>

            <div class="intro-box">
                <strong>مقدمة مهمة:</strong> أذكار الصباح هي من أعظم الحصون التي يتقي بها المسلم شرور يومه. رُوي عن رسول الله صلى الله عليه وسلم أنه كان يقول هذه الأذكار كل صباح. استمع لها بقلب حاضر واستشعر معانيها.
            </div>

            <div class="dua-card">
                <div class="dua-number">1</div>
                <div class="dua-text">أَعُوذُ بِاللهِ مِنْ الشَّيْطَانِ الرَّجِيمِ</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">2</div>
                <div class="dua-text">اللّهُ لاَ إِلَـهَ إِلاَّ هُوَ الْحَيُّ الْقَيُّومُ لاَ تَأْخُذُهُ سِنَةٌ وَلاَ نَوْمٌ لَّهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الأَرْضِ مَن ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلاَّ بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلاَ يُحِيطُونَ بِشَيْءٍ مِّنْ عِلْمِهِ إِلاَّ بِمَا شَاء وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالأَرْضَ وَلاَ يَؤُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ</div>
                <div class="benefits"><strong>الفائدة:</strong> من قالها حين يصبح أجير من الجن حتى يمسى ومن قالها حين يمسى أجير من الجن حتى يصبح</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">3</div>
                <div class="dua-text">بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم ❋ قُلْ هُوَ ٱللَّهُ أَحَدٌ، ٱللَّهُ ٱلصَّمَدُ، لَمْ يَلِدْ وَلَمْ يُولَدْ، وَلَمْ يَكُن لَّهُۥ كُفُوًا أَحَدٌۢ</div>
                <div class="benefits"><strong>الفائدة:</strong> من قالها حين يصبح وحين يمسى كفته من كل شىء (الإخلاص والمعوذتين)</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">4</div>
                <div class="dua-text">بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم ❋ قُلْ أَعُوذُ بِرَبِّ ٱلْفَلَقِ، مِن شَرِّ مَا خَلَقَ، وَمِن شَرِّ غَاسِقٍ إِذَا وَقَبَ، وَمِن شَرِّ ٱلنَّفَّٰثَٰتِ فِى ٱلْعُقَدِ، وَمِن شَرِّ حَاسِدٍ إِذَا حَسَدَ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">5</div>
                <div class="dua-text">بِسْمِ اللهِ الرَّحْمنِ الرَّحِيم ❋ قُلْ أَعُوذُ بِرَبِّ ٱلنَّاسِ، مَلِكِ ٱلنَّاسِ، إِلَٰهِ ٱلنَّاسِ، مِن شَرِّ ٱلْوَسْوَاسِ ٱلْخَنَّاسِ، ٱلَّذِى يُوَسْوِسُ فِى صُدُورِ ٱلنَّاسِ، مِنَ ٱلْجِنَّةِ وَٱلنَّاسِ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">6</div>
                <div class="dua-text">أَصْـبَحْنا وَأَصْـبَحَ المُـلْكُ لله وَالحَمدُ لله ، لا إلهَ إلاّ اللّهُ وَحدَهُ لا شَريكَ لهُ، لهُ المُـلكُ ولهُ الحَمْـد، وهُوَ على كلّ شَيءٍ قدير ، رَبِّ أسْـأَلُـكَ خَـيرَ ما في هـذا اليوم وَخَـيرَ ما بَعْـدَه ، وَأَعـوذُ بِكَ مِنْ شَـرِّ ما في هـذا اليوم وَشَرِّ ما بَعْـدَه، رَبِّ أَعـوذُبِكَ مِنَ الْكَسَـلِ وَسـوءِ الْكِـبَر ، رَبِّ أَعـوذُ بِكَ مِنْ عَـذابٍ في النّـارِ وَعَـذابٍ في القَـبْر</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">7</div>
                <div class="dua-text">اللّهـمَّ أَنْتَ رَبِّـي لا إلهَ إلاّ أَنْتَ ، خَلَقْتَنـي وَأَنا عَبْـدُك ، وَأَنا عَلـى عَهْـدِكَ وَوَعْـدِكَ ما اسْتَـطَعْـت ، أَعـوذُبِكَ مِنْ شَـرِّ ما صَنَـعْت ، أَبـوءُ لَـكَ بِنِعْـمَتِـكَ عَلَـيَّ وَأَبـوءُ بِذَنْـبي فَاغْفـِرْ لي فَإِنَّـهُ لا يَغْـفِرُ الذُّنـوبَ إِلاّ أَنْتَ</div>
                <div class="benefits"><strong>الفائدة:</strong> من قالها موقنا بها حين يمسى ومات من ليلته دخل الجنة وكذلك حين يصبح</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">8</div>
                <div class="dua-text">رَضيـتُ بِاللهِ رَبَّـاً وَبِالإسْلامِ ديـناً وَبِمُحَـمَّدٍ صلى الله عليه وسلم نَبِيّـاً</div>
                <div class="benefits"><strong>الفائدة:</strong> من قالها حين يصبح وحين يمسى كان حقا على الله أن يرضيه يوم القيامة</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">9</div>
                <div class="dua-text">اللّهُـمَّ إِنِّـي أَصْبَـحْتُ أُشْـهِدُك ، وَأُشْـهِدُ حَمَلَـةَ عَـرْشِـك ، وَمَلَائِكَتَكَ ، وَجَمـيعَ خَلْـقِك ، أَنَّـكَ أَنْـتَ اللهُ لا إلهَ إلاّ أَنْـتَ وَحْـدَكَ لا شَريكَ لَـك ، وَأَنَّ ُ مُحَمّـداً عَبْـدُكَ وَرَسـولُـك</div>
                <div class="benefits"><strong>الفائدة:</strong> من قالها أعتقه الله من النار</div>
                <div class="counter-display">👆 <span class="dua-counter">4</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">10</div>
                <div class="dua-text">اللّهُـمَّ ما أَصْبَـَحَ بي مِـنْ نِعْـمَةٍ أَو بِأَحَـدٍ مِـنْ خَلْـقِك ، فَمِـنْكَ وَحْـدَكَ لا شريكَ لَـك ، فَلَـكَ الْحَمْـدُ وَلَـكَ الشُّكْـر</div>
                <div class="benefits"><strong>الفائدة:</strong> من قالها حين يصبح أدى شكر يومه</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">11</div>
                <div class="dua-text">حَسْبِـيَ اللّهُ لا إلهَ إلاّ هُوَ عَلَـيهِ تَوَكَّـلتُ وَهُوَ رَبُّ العَرْشِ العَظـيم</div>
                <div class="benefits"><strong>الفائدة:</strong> من قالها كفاه الله ما أهمه من أمر الدنيا والأخرة</div>
                <div class="counter-display">👆 <span class="dua-counter">7</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">12</div>
                <div class="dua-text">بِسـمِ اللهِ الذي لا يَضُـرُّ مَعَ اسمِـهِ شَيءٌ في الأرْضِ وَلا في السّمـاءِ وَهـوَ السّمـيعُ العَلـيم</div>
                <div class="benefits"><strong>الفائدة:</strong> لم يضره من الله شيء</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">13</div>
                <div class="dua-text">اللّهُـمَّ بِكَ أَصْـبَحْنا وَبِكَ أَمْسَـينا ، وَبِكَ نَحْـيا وَبِكَ نَمُـوتُ وَإِلَـيْكَ النُّـشُور</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">14</div>
                <div class="dua-text">أَصْبَـحْـنا عَلَى فِطْرَةِ الإسْلاَمِ، وَعَلَى كَلِمَةِ الإِخْلاَصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ، وَعَلَى مِلَّةِ أَبِينَا إبْرَاهِيمَ حَنِيفاً مُسْلِماً وَمَا كَانَ مِنَ المُشْرِكِينَ</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">15</div>
                <div class="dua-text">سُبْحـانَ اللهِ وَبِحَمْـدِهِ عَدَدَ خَلْـقِه ، وَرِضـا نَفْسِـه ، وَزِنَـةَ عَـرْشِـه ، وَمِـدادَ كَلِمـاتِـه</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">16</div>
                <div class="dua-text">اللّهُـمَّ عافِـني في بَدَنـي ، اللّهُـمَّ عافِـني في سَمْـعي ، اللّهُـمَّ عافِـني في بَصَـري ، لا إلهَ إلاّ أَنْـتَ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">17</div>
                <div class="dua-text">اللّهُـمَّ إِنّـي أَعـوذُ بِكَ مِنَ الْكُـفر ، وَالفَـقْر ، وَأَعـوذُ بِكَ مِنْ عَذابِ القَـبْر ، لا إلهَ إلاّ أَنْـتَ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">18</div>
                <div class="dua-text">اللّهُـمَّ إِنِّـي أسْـأَلُـكَ العَـفْوَ وَالعـافِـيةَ في الدُّنْـيا وَالآخِـرَة ، اللّهُـمَّ إِنِّـي أسْـأَلُـكَ العَـفْوَ وَالعـافِـيةَ في ديني وَدُنْـيايَ وَأهْـلي وَمالـي ، اللّهُـمَّ اسْتُـرْ عـوْراتي وَآمِـنْ رَوْعاتـي ، اللّهُـمَّ احْفَظْـني مِن بَـينِ يَدَيَّ وَمِن خَلْفـي وَعَن يَمـيني وَعَن شِمـالي ، وَمِن فَوْقـي ، وَأَعـوذُ بِعَظَمَـتِكَ أَن أُغْـتالَ مِن تَحْتـي</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">19</div>
                <div class="dua-text">يَا حَيُّ يَا قيُّومُ بِرَحْمَتِكَ أسْتَغِيثُ أصْلِحْ لِي شَأنِي كُلَّهُ وَلاَ تَكِلْنِي إلَى نَفْسِي طَـرْفَةَ عَيْنٍ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">20</div>
                <div class="dua-text">أَصْبَـحْـنا وَأَصْبَـحْ المُـلكُ للهِ رَبِّ العـالَمـين ، اللّهُـمَّ إِنِّـي أسْـأَلُـكَ خَـيْرَ هـذا الـيَوْم ، فَـتْحَهُ ، وَنَصْـرَهُ ، وَنـورَهُ وَبَـرَكَتَـهُ ، وَهُـداهُ ، وَأَعـوذُ بِـكَ مِـنْ شَـرِّ ما فـيهِ وَشَـرِّ ما بَعْـدَه</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">21</div>
                <div class="dua-text">اللّهُـمَّ عالِـمَ الغَـيْبِ وَالشّـهادَةِ فاطِـرَ السّماواتِ وَالأرْضِ رَبَّ كـلِّ شَـيءٍ وَمَليـكَه ، أَشْهَـدُ أَنْ لا إِلـهَ إِلاّ أَنْت ، أَعـوذُ بِكَ مِن شَـرِّ نَفْسـي وَمِن شَـرِّ الشَّيْـطانِ وَشِرْكِهِ ، وَأَنْ أَقْتَـرِفَ عَلـى نَفْسـي سوءاً أَوْ أَجُـرَّهُ إِلـى مُسْـلِم</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">22</div>
                <div class="dua-text">أَعـوذُ بِكَلِمـاتِ اللّهِ التّـامّـاتِ مِنْ شَـرِّ ما خَلَـق</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">23</div>
                <div class="dua-text">اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ على نَبِيِّنَا مُحمَّد</div>
                <div class="benefits"><strong>الفائدة:</strong> من صلى على حين يصبح وحين يمسى ادركته شفاعتى يوم القيامة</div>
                <div class="counter-display">👆 <span class="dua-counter">10</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">24</div>
                <div class="dua-text">اللَّهُمَّ إِنَّا نَعُوذُ بِكَ مِنْ أَنْ نُشْرِكَ بِكَ شَيْئًا نَعْلَمُهُ ، وَنَسْتَغْفِرُكَ لِمَا لَا نَعْلَمُهُ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">25</div>
                <div class="dua-text">اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ الْهَمِّ وَالْحَزَنِ، وَأَعُوذُ بِكَ مِنْ الْعَجْزِ وَالْكَسَلِ، وَأَعُوذُ بِكَ مِنْ الْجُبْنِ وَالْبُخْلِ، وَأَعُوذُ بِكَ مِنْ غَلَبَةِ الدَّيْنِ، وَقَهْرِ الرِّجَالِ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">26</div>
                <div class="dua-text">أسْتَغْفِرُ اللهَ العَظِيمَ الَّذِي لاَ إلَهَ إلاَّ هُوَ، الحَيُّ القَيُّومُ، وَأتُوبُ إلَيهِ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">27</div>
                <div class="dua-text">يَا رَبِّ , لَكَ الْحَمْدُ كَمَا يَنْبَغِي لِجَلَالِ وَجْهِكَ , وَلِعَظِيمِ سُلْطَانِكَ</div>
                <div class="counter-display">👆 <span class="dua-counter">3</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">28</div>
                <div class="dua-text">اللَّهُمَّ إِنِّي أَسْأَلُكَ عِلْمًا نَافِعًا، وَرِزْقًا طَيِّبًا، وَعَمَلًا مُتَقَبَّلًا</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">29</div>
                <div class="dua-text">اللَّهُمَّ أَنْتَ رَبِّي لا إِلَهَ إِلا أَنْتَ ، عَلَيْكَ تَوَكَّلْتُ ، وَأَنْتَ رَبُّ الْعَرْشِ الْعَظِيمِ , مَا شَاءَ اللَّهُ كَانَ ، وَمَا لَمْ يَشَأْ لَمْ يَكُنْ ، وَلا حَوْلَ وَلا قُوَّةَ إِلا بِاللَّهِ الْعَلِيِّ الْعَظِيمِ , أَعْلَمُ أَنَّ اللَّهَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ ، وَأَنَّ اللَّهَ قَدْ أَحَاطَ بِكُلِّ شَيْءٍ عِلْمًا , اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي ، وَمِنْ شَرِّ كُلِّ دَابَّةٍ أَنْتَ آخِذٌ بِنَاصِيَتِهَا ، إِنَّ رَبِّي عَلَى صِرَاطٍ مُسْتَقِيمٍ</div>
                <div class="counter-display">👆 <span class="dua-counter">1</span></div>
            </div>

            <div class="dua-card">
                <div class="dua-number">30</div>
                <div class="dua-text">لَا إلَه إلّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءِ قَدِيرِ</div>
                <div class="benefits"><strong>الفائدة:</strong> كانت له عدل عشر رقاب، وكتبت له مئة حسنة، ومحيت عنه مئة سيئة، وكانت له حرزا من الشيطان</div>
                <div class="counter-display">👆 <span class="dua-counter">100</span></div>
            </div>
            </div><!-- end athkar-morning -->

            <!-- Sub: Evening athkar -->
            <div id="athkar-evening" class="sub-section">
            <h2 class="section-title">أذكار المساء</h2>
            <div class="intro-box">تُقرأ أذكار المساء من بعد صلاة العصر إلى غروب الشمس</div>
            <div class="dua-card"><div class="dua-number">1</div><div class="dua-text">أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، رَبِّ أَسْأَلُكَ خَيْرَ مَا فِي هَذِهِ اللَّيْلَةِ وَخَيْرَ مَا بَعْدَهَا، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِي هَذِهِ اللَّيْلَةِ وَشَرِّ مَا بَعْدَهَا، رَبِّ أَعُوذُ بِكَ مِنَ الْكَسَلِ وَسُوءِ الْكِبَرِ، رَبِّ أَعُوذُ بِكَ مِنْ عَذَابٍ فِي النَّارِ وَعَذَابٍ فِي الْقَبْرِ</div><div class="dua-source"><strong>المصدر:</strong> صحيح مسلم</div></div>
            <div class="dua-card"><div class="dua-number">2</div><div class="dua-text">اللَّهُمَّ بِكَ أَمْسَيْنَا، وَبِكَ أَصْبَحْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ الْمَصِيرُ</div><div class="dua-source"><strong>المصدر:</strong> الترمذي</div></div>
            <div class="dua-card"><div class="dua-number">3</div><div class="dua-text">اللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ بِذَنْبِي فَاغْفِرْ لِي فَإِنَّهُ لَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ</div><div class="dua-source"><strong>المصدر:</strong> صحيح البخاري - سيد الاستغفار</div></div>
            <div class="dua-card"><div class="dua-number">4</div><div class="dua-text">اللَّهُمَّ إِنِّي أَمْسَيْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ</div><div class="dua-source"><strong>المصدر:</strong> أبو داود - أربع مرات</div></div>
            <div class="dua-card"><div class="dua-number">5</div><div class="dua-text">اللَّهُمَّ مَا أَمْسَى بِي مِنْ نِعْمَةٍ أَوْ بِأَحَدٍ مِنْ خَلْقِكَ فَمِنْكَ وَحْدَكَ لَا شَرِيكَ لَكَ، فَلَكَ الْحَمْدُ وَلَكَ الشُّكْرُ</div><div class="dua-source"><strong>المصدر:</strong> أبو داود</div></div>
            <div class="dua-card"><div class="dua-number">6</div><div class="dua-text">اللَّهُمَّ عَافِنِي فِي بَدَنِي، اللَّهُمَّ عَافِنِي فِي سَمْعِي، اللَّهُمَّ عَافِنِي فِي بَصَرِي، لَا إِلَهَ إِلَّا أَنْتَ. اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْكُفْرِ، وَالْفَقْرِ، وَأَعُوذُ بِكَ مِنْ عَذَابِ الْقَبْرِ، لَا إِلَهَ إِلَّا أَنْتَ</div><div class="dua-source"><strong>المصدر:</strong> أبو داود - ثلاث مرات</div></div>
            <div class="dua-card"><div class="dua-number">7</div><div class="dua-text">حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ</div><div class="dua-source"><strong>المصدر:</strong> أبو داود - سبع مرات</div></div>
            <div class="dua-card"><div class="dua-number">8</div><div class="dua-text">بِسْمِ اللَّهِ الَّذِي لَا يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الْأَرْضِ وَلَا فِي السَّمَاءِ وَهُوَ السَّمِيعُ الْعَلِيمُ</div><div class="dua-source"><strong>المصدر:</strong> أبو داود والترمذي - ثلاث مرات</div></div>
            <div class="dua-card"><div class="dua-number">9</div><div class="dua-text">رَضِيتُ بِاللَّهِ رَبًّا، وَبِالْإِسْلَامِ دِينًا، وَبِمُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ نَبِيًّا</div><div class="dua-source"><strong>المصدر:</strong> أحمد وأبو داود - ثلاث مرات</div></div>
            <div class="dua-card"><div class="dua-number">10</div><div class="dua-text">يَا حَيُّ يَا قَيُّومُ بِرَحْمَتِكَ أَسْتَغِيثُ أَصْلِحْ لِي شَأْنِي كُلَّهُ وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ</div><div class="dua-source"><strong>المصدر:</strong> الحاكم - ثلاث مرات</div></div>
            <div class="dua-card"><div class="dua-number">11</div><div class="dua-text">أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ</div><div class="dua-source"><strong>المصدر:</strong> مسلم - ثلاث مرات مساءً</div></div>
            <div class="dua-card"><div class="dua-number">12</div><div class="dua-text">اللَّهُمَّ صَلِّ وَسَلِّمْ عَلَى نَبِيِّنَا مُحَمَّدٍ</div><div class="dua-source"><strong>المصدر:</strong> الترمذي - عشر مرات</div></div>
            <div class="dua-card"><div class="dua-number">13</div><div class="dua-text">سُبْحَانَ اللَّهِ وَبِحَمْدِهِ</div><div class="dua-source"><strong>المصدر:</strong> مسلم - مئة مرة</div></div>
            </div><!-- end athkar-evening -->

            <!-- Sub: Sleep athkar -->
            <div id="athkar-sleep" class="sub-section">
            <h2 class="section-title">أذكار النوم</h2>
            <div class="intro-box">تُقرأ عند النوم والاستعداد للنوم</div>
            <div class="dua-card"><div class="dua-number">1</div><div class="dua-text">بِاسْمِكَ رَبِّي وَضَعْتُ جَنْبِي، وَبِكَ أَرْفَعُهُ، فَإِنْ أَمْسَكْتَ نَفْسِي فَارْحَمْهَا، وَإِنْ أَرْسَلْتَهَا فَاحْفَظْهَا بِمَا تَحْفَظُ بِهِ عِبَادَكَ الصَّالِحِينَ</div><div class="dua-source"><strong>المصدر:</strong> البخاري ومسلم</div></div>
            <div class="dua-card"><div class="dua-number">2</div><div class="dua-text">اللَّهُمَّ إِنَّكَ خَلَقْتَ نَفْسِي وَأَنْتَ تَوَفَّاهَا، لَكَ مَمَاتُهَا وَمَحْيَاهَا، إِنْ أَحْيَيْتَهَا فَاحْفَظْهَا، وَإِنْ أَمَتَّهَا فَاغْفِرْ لَهَا، اللَّهُمَّ إِنِّي أَسْأَلُكَ الْعَافِيَةَ</div><div class="dua-source"><strong>المصدر:</strong> صحيح مسلم</div></div>
            <div class="dua-card"><div class="dua-number">3</div><div class="dua-text">اللَّهُمَّ قِنِي عَذَابَكَ يَوْمَ تَبْعَثُ عِبَادَكَ</div><div class="dua-source"><strong>المصدر:</strong> أبو داود والترمذي - ثلاث مرات</div></div>
            <div class="dua-card"><div class="dua-number">4</div><div class="dua-text">بِاسْمِكَ اللَّهُمَّ أَمُوتُ وَأَحْيَا</div><div class="dua-source"><strong>المصدر:</strong> البخاري</div></div>
            <div class="dua-card"><div class="dua-number">5</div><div class="dua-text">الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا، وَكَفَانَا، وَآوَانَا، فَكَمْ مِمَّنْ لَا كَافِيَ لَهُ وَلَا مُؤْوِيَ</div><div class="dua-source"><strong>المصدر:</strong> صحيح مسلم</div></div>
            <div class="dua-card"><div class="dua-number">6</div><div class="dua-text">اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّمَاوَاتِ وَالْأَرْضِ، رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي، وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ</div><div class="dua-source"><strong>المصدر:</strong> أبو داود والترمذي</div></div>
            <div class="dua-card"><div class="dua-number">7</div><div class="dua-text">اللَّهُمَّ أَسْلَمْتُ نَفْسِي إِلَيْكَ، وَفَوَّضْتُ أَمْرِي إِلَيْكَ، وَوَجَّهْتُ وَجْهِي إِلَيْكَ، وَأَلْجَأْتُ ظَهْرِي إِلَيْكَ، رَغْبَةً وَرَهْبَةً إِلَيْكَ، لَا مَلْجَأَ وَلَا مَنْجَا مِنْكَ إِلَّا إِلَيْكَ، آمَنْتُ بِكِتَابِكَ الَّذِي أَنْزَلْتَ وَبِنَبِيِّكَ الَّذِي أَرْسَلْتَ</div><div class="dua-source"><strong>المصدر:</strong> البخاري ومسلم</div></div>
            <div class="dua-card"><div class="dua-number">8</div><div class="dua-text">سُبْحَانَ اللَّهِ (33) وَالْحَمْدُ لِلَّهِ (33) وَاللَّهُ أَكْبَرُ (34)</div><div class="dua-source"><strong>المصدر:</strong> البخاري ومسلم</div></div>
            </div><!-- end athkar-sleep -->

            <!-- Sub: Post-prayer athkar -->
            <div id="athkar-prayer" class="sub-section">
            <h2 class="section-title">أذكار بعد الصلاة</h2>
            <div class="intro-box">تُقال بعد السلام من كل صلاة مفروضة</div>
            <div class="dua-card"><div class="dua-number">1</div><div class="dua-text">أَسْتَغْفِرُ اللَّهَ، أَسْتَغْفِرُ اللَّهَ، أَسْتَغْفِرُ اللَّهَ. اللَّهُمَّ أَنْتَ السَّلَامُ، وَمِنْكَ السَّلَامُ، تَبَارَكْتَ يَا ذَا الْجَلَالِ وَالْإِكْرَامِ</div><div class="dua-source"><strong>المصدر:</strong> صحيح مسلم</div></div>
            <div class="dua-card"><div class="dua-number">2</div><div class="dua-text">لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، اللَّهُمَّ لَا مَانِعَ لِمَا أَعْطَيْتَ، وَلَا مُعْطِيَ لِمَا مَنَعْتَ، وَلَا يَنْفَعُ ذَا الْجَدِّ مِنْكَ الْجَدُّ</div><div class="dua-source"><strong>المصدر:</strong> البخاري ومسلم</div></div>
            <div class="dua-card"><div class="dua-number">3</div><div class="dua-text">لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، لَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللَّهِ، لَا إِلَهَ إِلَّا اللَّهُ، وَلَا نَعْبُدُ إِلَّا إِيَّاهُ، لَهُ النِّعْمَةُ وَلَهُ الْفَضْلُ، وَلَهُ الثَّنَاءُ الْحَسَنُ، لَا إِلَهَ إِلَّا اللَّهُ مُخْلِصِينَ لَهُ الدِّينَ وَلَوْ كَرِهَ الْكَافِرُونَ</div><div class="dua-source"><strong>المصدر:</strong> صحيح مسلم</div></div>
            <div class="dua-card"><div class="dua-number">4</div><div class="dua-text">سُبْحَانَ اللَّهِ (33) وَالْحَمْدُ لِلَّهِ (33) وَاللَّهُ أَكْبَرُ (33) ثم لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ</div><div class="dua-source"><strong>المصدر:</strong> صحيح مسلم - تمام المئة</div></div>
            <div class="dua-card"><div class="dua-number">5</div><div class="dua-text">قراءة آية الكرسي: ﴿اللَّهُ لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ﴾</div><div class="dua-source"><strong>المصدر:</strong> النسائي - بعد كل صلاة</div></div>
            <div class="dua-card"><div class="dua-number">6</div><div class="dua-text">قراءة ﴿قُلْ هُوَ اللَّهُ أَحَدٌ﴾ و ﴿قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ﴾ و ﴿قُلْ أَعُوذُ بِرَبِّ النَّاسِ﴾</div><div class="dua-source"><strong>المصدر:</strong> أبو داود - مرة بعد كل صلاة، وثلاثاً بعد الفجر والمغرب</div></div>
            <div class="dua-card"><div class="dua-number">7</div><div class="dua-text">اللَّهُمَّ إِنِّي أَسْأَلُكَ عِلْمًا نَافِعًا، وَرِزْقًا طَيِّبًا، وَعَمَلًا مُتَقَبَّلًا</div><div class="dua-source"><strong>المصدر:</strong> ابن ماجه - بعد صلاة الفجر</div></div>
            </div><!-- end athkar-prayer -->
        </div><!-- end tabAthkar -->

        <!-- DUAS TAB -->
        <div id="tabDuas" class="content-area">
            <h2 class="section-title">الأدعية</h2>
            <div class="sub-nav">
                <button class="sub-nav-btn active" onclick="switchSub('tabDuas','duas-rizq',this)">أدعية الرزق</button>
                <button class="sub-nav-btn" onclick="switchSub('tabDuas','duas-quran',this)">أدعية قرآنية</button>
                <button class="sub-nav-btn" onclick="switchSub('tabDuas','duas-ruqyah',this)">الرقية الشرعية</button>
            </div>

            <!-- Sub: Rizq duas (existing tab4 content) -->
            <div id="duas-rizq" class="sub-section active">
            <h2 class="section-title">أدعية مستجابة لجلب الرزق</h2>

            <div class="intro-box">
                <strong>المقدمة:</strong> من فضل الله على المسلمين أنه شرع لهم الدعاء، ووعدهم بالإجابة في قوله تعالى: "وَإِذَا سَأَلَكَ عِبَادِي عَنِّي فَإِنِّي قَرِيبٌ أُجِيبُ دَعْوَةَ الدَّاعِ إِذَا دَعَانِ" [البقرة: 186]
            </div>

            <div class="section-heading">أدعية مأثورة من السنة في طلب الرزق</div>

            <div class="dua-card">
                <div class="dua-number">1</div>
                <div class="dua-text">اللهُمّ إني أعوذُ بكَ منَ الهمِّ والحزَنِ، وأعوذُ بكَ منَ العجزِ والكسلِ، وأعوذُ بكَ منَ الجُبنِ والبخلِ، وأعوذُ بكَ مِن غلبةِ الدَّينِ وقهرِ الرجالِ</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">2</div>
                <div class="dua-text">اللَّهمَّ اكفني بِحلالِكَ عن حرامِكَ، وأغنِني بِفَضلِكَ عَمن سواكَ</div>
                <div class="benefits"><strong>الفائدة:</strong> دعاء عظيم الشأن لطلب الرزق الحلال والاستغناء عن الآخرين</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">3</div>
                <div class="dua-text">اللهمَّ مالِكَ المُلْكِ تُؤْتي المُلْكَ مَن تشاءُ، وتنزع الملك ممن تشاء، وتعز من تشاء، وتذل من تشاء، بيدك الخير إنك على كل شيء قدير</div>
                <div class="benefits"><strong>الفائدة:</strong> دعاء عظيم لطلب الرزق والملك من الله تعالى، وهو سهل على من لو كان عليه مثل جبل أحد دينا لأداه الله عنه</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">4</div>
                <div class="dua-text">اللَّهُمَّ لا مَانِعَ لِما أعْطَيْتَ، ولَا مُعْطِيَ لِما مَنَعْتَ، ولَا يَنْفَعُ ذَا الجَدِّ مِنْكَ الجَدُّ</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">5</div>
                <div class="dua-text">اللَّهمَّ ربَّ السَّماواتِ وربَّ الأرضِ، وربَّ كلِّ شيءٍ، فالقَ الحبِّ والنَّوَى، مُنزِلَ التَّوراةِ والإنجيلِ، أعِذْني من شرِّ كلِّ ذي شرٍّ، أنت آخِذٌ بناصيتِه، أنت الأوَّلُ فليس قبلك شيءٌ، وأنت الباطنُ فليس دونك شيءٌ، وأنت الظَّاهرُ فليس فوقك شيءٌ، اقْضِ عنِّي الدَّينَ وأغْنِني من الفقرِ</div>
            </div>

            <div class="dua-card">
                <div class="dua-number">6</div>
                <div class="dua-text">اللَّهُمَّ اغْفِرْ لِي، وَارْحَمْنِي، وَاهْدِنِي، وَعَافِنِي وَارْزُقْنِي</div>
            </div>

            <div class="section-heading">الاستغفار طريق الرزق</div>

            <div class="intro-box">
                <strong>قال الله تعالى:</strong> "فَقُلْتُ اسْتَغْفِرُوا رَبَّكُمْ إِنَّهُ كَانَ غَفَّارًا* يُرْسِلِ السَّمَاءَ عَلَيْكُم مِّدْرَارًا* وَيُمْدِدْكُم بِأَمْوَالٍ وَبَنِينَ وَيَجْعَل لَّكُمْ جَنَّاتٍ وَيَجْعَل لَّكُمْ أَنْهَارًا"
            </div>

            <div class="section-heading">أدعية لجلب الرزق والبركة</div>

            <div class="dua-card">
                <div class="dua-text">اللهم صل على سيدنا محمد، وعلى آل محمد، يا ذا الجلال والإكرام، يا قاضي الحاجات، يا أرحم الراحمين</div>
            </div>

            <div class="dua-card">
                <div class="dua-text">اللّهم إنّي أحمدك حمداً كثيراً وأشكرك شكراً كثيراً يليق بجلال وجهك وعظيم سلطانك، اللهم اكفني بحلالك عن حرامك وأغنني بفضلك عمن سواك</div>
            </div>

            <div class="dua-card">
                <div class="dua-text">يا الله، يا رب، يا حي يا قيوم، يا ذا الجلال والإكرام، أسألك باسمك العظيم الأعظم أن ترزقني رزقاً واسعاً حلالاً طيباً</div>
            </div>

            <div class="dua-card">
                <div class="dua-text">اللهم ارزقنا رزقا حلالاً طيباً مباركاً فيه كما تحب وترضى يا رب العالمين</div>
            </div>

            <div class="dua-card">
                <div class="dua-text">حسبنا الله سيؤتينا الله من فضله إنا إلى الله راغبون</div>
            </div>

            <div class="dua-card">
                <div class="dua-text">اللّهم إن كان رزقي في السّماء فأنزله، وإن كان في الأرض فأخرجه، وإن كان بعيداً فقرّبه وإن كان قريباً فيسّره، وإن كان قليلاً فكثّره، وإن كان كثيراً فبارك لي فيه</div>
            </div>

            <div class="section-heading">نصائح ذهبية للحصول على الرزق الحلال</div>

            <div class="intro-box">
                <ul class="benefits-list">
                    <li><strong>1. ادعُ بقلب خاشع:</strong> ادع الله بإخلاص وتوكل عليه في طلب الرزق</li>
                    <li><strong>2. خذ بالأسباب:</strong> اعمل واسع في تحصيل الرزق، فالعمل ركن الرزق</li>
                    <li><strong>3. تجنب الحرام:</strong> احذر من كسب الحرام فهو يلعن المال والصاحب</li>
                    <li><strong>4. تصدق وأعطِ:</strong> تصدق من مالك فالصدقة لا تنقص المال بل تزيده</li>
                    <li><strong>5. استغفر كثيراً:</strong> الاستغفار يفتح أبواب الرزق والبركة</li>
                    <li><strong>6. اتق الله:</strong> التقوى تجلب البركة والرزق: "وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا ۝ وَيَرْزُقْهُ مِنْ حَيْثُ لَا يَحْتَسِبُ"</li>
                    <li><strong>7. لا تقنط:</strong> لا تيأس من رحمة الله فهو الكريم الرزاق</li>
                    <li><strong>8. احسن الظن بالله:</strong> يقول الله: "أنا عند ظن عبدي بي"</li>
                </ul>
            </div>
            </div><!-- end duas-rizq -->

            <!-- Sub: Quranic Duas -->
            <div id="duas-quran" class="sub-section">
            <h2 class="section-title">أدعية من القرآن الكريم</h2>
            <div class="intro-box">أدعية وردت في القرآن الكريم على لسان الأنبياء والصالحين</div>
            <div class="dua-card"><div class="dua-number">1</div><div class="dua-text">رَبَّنَا آتِنَا فِي الدُّنْيَا حَسَنَةً وَفِي الْآخِرَةِ حَسَنَةً وَقِنَا عَذَابَ النَّارِ</div><div class="dua-source"><strong>المصدر:</strong> البقرة: 201</div></div>
            <div class="dua-card"><div class="dua-number">2</div><div class="dua-text">رَبَّنَا لَا تُؤَاخِذْنَا إِن نَّسِينَا أَوْ أَخْطَأْنَا ۚ رَبَّنَا وَلَا تَحْمِلْ عَلَيْنَا إِصْرًا كَمَا حَمَلْتَهُ عَلَى الَّذِينَ مِن قَبْلِنَا ۚ رَبَّنَا وَلَا تُحَمِّلْنَا مَا لَا طَاقَةَ لَنَا بِهِ ۖ وَاعْفُ عَنَّا وَاغْفِرْ لَنَا وَارْحَمْنَا ۚ أَنتَ مَوْلَانَا فَانصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ</div><div class="dua-source"><strong>المصدر:</strong> البقرة: 286</div></div>
            <div class="dua-card"><div class="dua-number">3</div><div class="dua-text">رَبَّنَا لَا تُزِغْ قُلُوبَنَا بَعْدَ إِذْ هَدَيْتَنَا وَهَبْ لَنَا مِن لَّدُنكَ رَحْمَةً ۚ إِنَّكَ أَنتَ الْوَهَّابُ</div><div class="dua-source"><strong>المصدر:</strong> آل عمران: 8</div></div>
            <div class="dua-card"><div class="dua-number">4</div><div class="dua-text">رَبَّنَا إِنَّنَا آمَنَّا فَاغْفِرْ لَنَا ذُنُوبَنَا وَقِنَا عَذَابَ النَّارِ</div><div class="dua-source"><strong>المصدر:</strong> آل عمران: 16</div></div>
            <div class="dua-card"><div class="dua-number">5</div><div class="dua-text">رَبِّ هَبْ لِي مِن لَّدُنكَ ذُرِّيَّةً طَيِّبَةً ۖ إِنَّكَ سَمِيعُ الدُّعَاءِ</div><div class="dua-source"><strong>المصدر:</strong> آل عمران: 38 - دعاء زكريا عليه السلام</div></div>
            <div class="dua-card"><div class="dua-number">6</div><div class="dua-text">رَبَّنَا اغْفِرْ لَنَا ذُنُوبَنَا وَإِسْرَافَنَا فِي أَمْرِنَا وَثَبِّتْ أَقْدَامَنَا وَانصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ</div><div class="dua-source"><strong>المصدر:</strong> آل عمران: 147</div></div>
            <div class="dua-card"><div class="dua-number">7</div><div class="dua-text">رَبَّنَا ظَلَمْنَا أَنفُسَنَا وَإِن لَّمْ تَغْفِرْ لَنَا وَتَرْحَمْنَا لَنَكُونَنَّ مِنَ الْخَاسِرِينَ</div><div class="dua-source"><strong>المصدر:</strong> الأعراف: 23 - دعاء آدم وحواء</div></div>
            <div class="dua-card"><div class="dua-number">8</div><div class="dua-text">رَبِّ اشْرَحْ لِي صَدْرِي ﴿٢٥﴾ وَيَسِّرْ لِي أَمْرِي ﴿٢٦﴾ وَاحْلُلْ عُقْدَةً مِّن لِّسَانِي ﴿٢٧﴾ يَفْقَهُوا قَوْلِي</div><div class="dua-source"><strong>المصدر:</strong> طه: 25-28 - دعاء موسى عليه السلام</div></div>
            <div class="dua-card"><div class="dua-number">9</div><div class="dua-text">رَبِّ زِدْنِي عِلْمًا</div><div class="dua-source"><strong>المصدر:</strong> طه: 114</div></div>
            <div class="dua-card"><div class="dua-number">10</div><div class="dua-text">لَّا إِلَٰهَ إِلَّا أَنتَ سُبْحَانَكَ إِنِّي كُنتُ مِنَ الظَّالِمِينَ</div><div class="dua-source"><strong>المصدر:</strong> الأنبياء: 87 - دعاء يونس عليه السلام</div></div>
            <div class="dua-card"><div class="dua-number">11</div><div class="dua-text">رَبِّ أَعُوذُ بِكَ مِنْ هَمَزَاتِ الشَّيَاطِينِ ﴿٩٧﴾ وَأَعُوذُ بِكَ رَبِّ أَن يَحْضُرُونِ</div><div class="dua-source"><strong>المصدر:</strong> المؤمنون: 97-98</div></div>
            <div class="dua-card"><div class="dua-number">12</div><div class="dua-text">رَبَّنَا هَبْ لَنَا مِنْ أَزْوَاجِنَا وَذُرِّيَّاتِنَا قُرَّةَ أَعْيُنٍ وَاجْعَلْنَا لِلْمُتَّقِينَ إِمَامًا</div><div class="dua-source"><strong>المصدر:</strong> الفرقان: 74</div></div>
            <div class="dua-card"><div class="dua-number">13</div><div class="dua-text">رَبِّ أَوْزِعْنِي أَنْ أَشْكُرَ نِعْمَتَكَ الَّتِي أَنْعَمْتَ عَلَيَّ وَعَلَىٰ وَالِدَيَّ وَأَنْ أَعْمَلَ صَالِحًا تَرْضَاهُ وَأَدْخِلْنِي بِرَحْمَتِكَ فِي عِبَادِكَ الصَّالِحِينَ</div><div class="dua-source"><strong>المصدر:</strong> النمل: 19 - دعاء سليمان عليه السلام</div></div>
            <div class="dua-card"><div class="dua-number">14</div><div class="dua-text">رَبَّنَا اغْفِرْ لَنَا وَلِإِخْوَانِنَا الَّذِينَ سَبَقُونَا بِالْإِيمَانِ وَلَا تَجْعَلْ فِي قُلُوبِنَا غِلًّا لِّلَّذِينَ آمَنُوا رَبَّنَا إِنَّكَ رَءُوفٌ رَّحِيمٌ</div><div class="dua-source"><strong>المصدر:</strong> الحشر: 10</div></div>
            <div class="dua-card"><div class="dua-number">15</div><div class="dua-text">رَبَّنَا أَتْمِمْ لَنَا نُورَنَا وَاغْفِرْ لَنَا ۖ إِنَّكَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ</div><div class="dua-source"><strong>المصدر:</strong> التحريم: 8</div></div>
            </div><!-- end duas-quran -->

            <!-- Sub: Ruqyah -->
            <div id="duas-ruqyah" class="sub-section">
            <h2 class="section-title">الرقية الشرعية</h2>
            <div class="intro-box">آيات وأدعية الرقية الشرعية من القرآن والسنة للحفظ والشفاء بإذن الله</div>
            <div class="dua-card"><div class="dua-number">1</div><div class="dua-text">بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ ﴿١﴾ الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ ﴿٢﴾ الرَّحْمَنِ الرَّحِيمِ ﴿٣﴾ مَالِكِ يَوْمِ الدِّينِ ﴿٤﴾ إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ ﴿٥﴾ اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ ﴿٦﴾ صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ غَيْرِ الْمَغْضُوبِ عَلَيْهِمْ وَلَا الضَّالِّينَ ﴿٧﴾</div><div class="dua-source"><strong>المصدر:</strong> سورة الفاتحة كاملة</div></div>
            <div class="dua-card"><div class="dua-number">2</div><div class="dua-text">اللَّهُ لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ ۚ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ ۚ لَّهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ ۗ مَن ذَا الَّذِي يَشْفَعُ عِندَهُ إِلَّا بِإِذْنِهِ ۚ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ ۖ وَلَا يُحِيطُونَ بِشَيْءٍ مِّنْ عِلْمِهِ إِلَّا بِمَا شَاءَ ۚ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ ۖ وَلَا يَئُودُهُ حِفْظُهُمَا ۚ وَهُوَ الْعَلِيُّ الْعَظِيمُ</div><div class="dua-source"><strong>المصدر:</strong> آية الكرسي - البقرة: 255</div></div>
            <div class="dua-card"><div class="dua-number">3</div><div class="dua-text">آمَنَ الرَّسُولُ بِمَا أُنزِلَ إِلَيْهِ مِن رَّبِّهِ وَالْمُؤْمِنُونَ ۚ كُلٌّ آمَنَ بِاللَّهِ وَمَلَائِكَتِهِ وَكُتُبِهِ وَرُسُلِهِ لَا نُفَرِّقُ بَيْنَ أَحَدٍ مِّن رُّسُلِهِ ۚ وَقَالُوا سَمِعْنَا وَأَطَعْنَا ۖ غُفْرَانَكَ رَبَّنَا وَإِلَيْكَ الْمَصِيرُ</div><div class="dua-source"><strong>المصدر:</strong> البقرة: 285</div></div>
            <div class="dua-card"><div class="dua-number">4</div><div class="dua-text">قُلْ هُوَ اللَّهُ أَحَدٌ ﴿١﴾ اللَّهُ الصَّمَدُ ﴿٢﴾ لَمْ يَلِدْ وَلَمْ يُولَدْ ﴿٣﴾ وَلَمْ يَكُن لَّهُ كُفُوًا أَحَدٌ ﴿٤﴾</div><div class="dua-source"><strong>المصدر:</strong> سورة الإخلاص - ثلاث مرات</div></div>
            <div class="dua-card"><div class="dua-number">5</div><div class="dua-text">قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ ﴿١﴾ مِن شَرِّ مَا خَلَقَ ﴿٢﴾ وَمِن شَرِّ غَاسِقٍ إِذَا وَقَبَ ﴿٣﴾ وَمِن شَرِّ النَّفَّاثَاتِ فِي الْعُقَدِ ﴿٤﴾ وَمِن شَرِّ حَاسِدٍ إِذَا حَسَدَ ﴿٥﴾</div><div class="dua-source"><strong>المصدر:</strong> سورة الفلق - ثلاث مرات</div></div>
            <div class="dua-card"><div class="dua-number">6</div><div class="dua-text">قُلْ أَعُوذُ بِرَبِّ النَّاسِ ﴿١﴾ مَلِكِ النَّاسِ ﴿٢﴾ إِلَهِ النَّاسِ ﴿٣﴾ مِن شَرِّ الْوَسْوَاسِ الْخَنَّاسِ ﴿٤﴾ الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ ﴿٥﴾ مِنَ الْجِنَّةِ وَالنَّاسِ ﴿٦﴾</div><div class="dua-source"><strong>المصدر:</strong> سورة الناس - ثلاث مرات</div></div>
            <div class="section-heading">أدعية الرقية من السنة</div>
            <div class="dua-card"><div class="dua-number">7</div><div class="dua-text">بِسْمِ اللَّهِ أَرْقِيكَ، مِنْ كُلِّ شَيْءٍ يُؤْذِيكَ، مِنْ شَرِّ كُلِّ نَفْسٍ أَوْ عَيْنِ حَاسِدٍ اللَّهُ يَشْفِيكَ، بِسْمِ اللَّهِ أَرْقِيكَ</div><div class="dua-source"><strong>المصدر:</strong> صحيح مسلم</div></div>
            <div class="dua-card"><div class="dua-number">8</div><div class="dua-text">أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّةِ مِنْ كُلِّ شَيْطَانٍ وَهَامَّةٍ، وَمِنْ كُلِّ عَيْنٍ لَامَّةٍ</div><div class="dua-source"><strong>المصدر:</strong> صحيح البخاري</div></div>
            <div class="dua-card"><div class="dua-number">9</div><div class="dua-text">أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ الَّتِي لَا يُجَاوِزُهُنَّ بَرٌّ وَلَا فَاجِرٌ، مِنْ شَرِّ مَا خَلَقَ وَذَرَأَ وَبَرَأَ، وَمِنْ شَرِّ مَا يَنْزِلُ مِنَ السَّمَاءِ، وَمِنْ شَرِّ مَا يَعْرُجُ فِيهَا، وَمِنْ شَرِّ مَا ذَرَأَ فِي الْأَرْضِ وَمِنْ شَرِّ مَا يَخْرُجُ مِنْهَا، وَمِنْ شَرِّ فِتَنِ اللَّيْلِ وَالنَّهَارِ، وَمِنْ شَرِّ كُلِّ طَارِقٍ إِلَّا طَارِقًا يَطْرُقُ بِخَيْرٍ يَا رَحْمَنُ</div><div class="dua-source"><strong>المصدر:</strong> أحمد</div></div>
            <div class="dua-card"><div class="dua-number">10</div><div class="dua-text">اللَّهُمَّ رَبَّ النَّاسِ، أَذْهِبِ الْبَأْسَ، اشْفِهِ وَأَنْتَ الشَّافِي، لَا شِفَاءَ إِلَّا شِفَاؤُكَ، شِفَاءً لَا يُغَادِرُ سَقَمًا</div><div class="dua-source"><strong>المصدر:</strong> البخاري ومسلم</div></div>
            </div><!-- end duas-ruqyah -->

        </div><!-- end tabDuas -->

        <!-- TOOLS TAB -->
        <div id="tabTools" class="content-area">
            <h2 class="section-title">أدوات المسلم</h2>
            <div class="sub-nav">
                <button class="sub-nav-btn active" onclick="switchSub('tabTools','tools-prayer',this)">مواقيت الصلاة</button>
                <button class="sub-nav-btn" onclick="switchSub('tabTools','tools-ramadan',this)">تقويم رمضان</button>
                <button class="sub-nav-btn" onclick="switchSub('tabTools','tools-tasbeeh',this)">عداد التسبيح</button>
                <button class="sub-nav-btn" onclick="switchSub('tabTools','tools-names',this)">أسماء الله الحسنى</button>
            </div>

            <!-- Sub: Prayer times -->
            <div id="tools-prayer" class="sub-section active">
            <h2 class="section-title">مواقيت الصلاة</h2>
            <div id="prayerLocation" style="text-align:center;margin-bottom:15px;color:var(--text-muted);font-size:1.1em"></div>
            <div class="prayer-grid" id="toolsPrayerGrid">
                <div class="prayer-card"><div class="prayer-card-name">الفجر</div><div class="prayer-card-time" id="toolsFajr">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">الشروق</div><div class="prayer-card-time" id="toolsSunrise">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">الظهر</div><div class="prayer-card-time" id="toolsDhuhr">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">العصر</div><div class="prayer-card-time" id="toolsAsr">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">المغرب</div><div class="prayer-card-time" id="toolsMaghrib">--:--</div></div>
                <div class="prayer-card"><div class="prayer-card-name">العشاء</div><div class="prayer-card-time" id="toolsIsha">--:--</div></div>
            </div>
            <div style="text-align:center;margin-top:15px">
                <button class="tasbeeh-ctrl-btn" onclick="fetchPrayerTimes()" id="refreshPrayerBtn">تحديث المواقيت</button>
            </div>
            </div><!-- end tools-prayer -->

            <!-- Sub: Ramadan Calendar -->
            <div id="tools-ramadan" class="sub-section">
            <h2 class="section-title">تقويم رمضان</h2>
            <div id="ramadanCalInfo" style="text-align:center;margin-bottom:15px;color:var(--text-muted);font-size:1.1em"></div>
            <div id="ramadanCalContainer"><div style="text-align:center;padding:30px;color:var(--text-muted)">جاري تحميل التقويم...</div></div>
            </div><!-- end tools-ramadan -->

            <!-- Sub: Tasbeeh counter -->
            <div id="tools-tasbeeh" class="sub-section">
            <h2 class="section-title">عداد التسبيح</h2>
            <div class="tasbeeh-container">
                <div class="tasbeeh-presets">
                    <button class="tasbeeh-preset active" onclick="setTasbeehPreset('سبحان الله',33,this)">سبحان الله</button>
                    <button class="tasbeeh-preset" onclick="setTasbeehPreset('الحمد لله',33,this)">الحمد لله</button>
                    <button class="tasbeeh-preset" onclick="setTasbeehPreset('الله أكبر',34,this)">الله أكبر</button>
                    <button class="tasbeeh-preset" onclick="setTasbeehPreset('لا إله إلا الله',100,this)">لا إله إلا الله</button>
                    <button class="tasbeeh-preset" onclick="setTasbeehPreset('أستغفر الله',100,this)">أستغفر الله</button>
                    <button class="tasbeeh-preset" onclick="setTasbeehPreset('لا حول ولا قوة إلا بالله',0,this)">لا حول ولا قوة إلا بالله</button>
                </div>
                <div class="tasbeeh-target" id="tasbeehTarget">الهدف: ٣٣</div>
                <div class="tasbeeh-count" id="tasbeehCount">٠</div>
                <div id="tasbeehLabel" style="font-size:1.4em;color:var(--gold-soft);margin-bottom:15px;font-family:'Scheherazade New',serif">سبحان الله</div>
                <button class="tasbeeh-btn" onclick="incrementTasbeeh()" id="tasbeehBtn">اضغط</button>
                <div class="tasbeeh-controls">
                    <button class="tasbeeh-ctrl-btn" onclick="resetTasbeeh()">إعادة ٠</button>
                    <button class="tasbeeh-ctrl-btn" id="tasbeehTotalBtn">المجموع: ٠</button>
                </div>
            </div>
            </div><!-- end tools-tasbeeh -->

            <!-- Sub: 99 Names -->
            <div id="tools-names" class="sub-section">
            <h2 class="section-title">أسماء الله الحسنى</h2>
            <div class="intro-box">قال رسول الله ﷺ: «إنَّ لِلَّهِ تِسْعَةً وتِسْعِينَ اسْمًا، مِئَةً إلَّا واحِدًا، مَن أحْصاها دَخَلَ الجَنَّةَ» - متفق عليه</div>
            <div class="names-grid" id="namesGrid"></div>
            </div><!-- end tools-names -->

        </div><!-- end tabTools -->

        <!-- TAB 7: Full Quran Browser (Enhanced) -->
        <div id="tab7" class="content-area">
            <div class="quran-browser">
                <div class="s-list" id="surahListView">
                    <h2 class="section-title">القرآن الكريم</h2>
                    <div class="last-read-card" id="lastReadCard" style="display:none" onclick="resumeLastRead()">
                        <span style="font-size:2em">📖</span>
                        <div style="flex:1">
                            <div style="font-size:1.25em;color:var(--gold-soft);font-weight:600" id="lrTitle">متابعة القراءة</div>
                            <div style="font-size:1.05em;color:var(--cream-soft);opacity:0.8" id="lrDetail"></div>
                        </div>
                        <span style="font-size:1.4em;color:var(--gold-soft)">←</span>
                    </div>
                    <div class="bookmarks-bar" id="bmBar"></div>
                    <input type="text" class="quran-search" id="surahSearch" placeholder="ابحث عن سورة بالاسم أو الرقم..." oninput="filterSurahs2()">
                    <div class="q-filters2">
                        <button class="q-filter2 on" onclick="setQFilter('all',this)">الكل (114)</button>
                        <button class="q-filter2" onclick="setQFilter('mec',this)">مكية (86)</button>
                        <button class="q-filter2" onclick="setQFilter('med',this)">مدنية (28)</button>
                        <button class="q-filter2" onclick="setQFilter('hl',this)" id="hlFilterBtn">المميزة</button>
                        <button class="q-filter2" id="offlineBtn" onclick="downloadAllSurahs()">تحميل للقراءة بدون إنترنت</button>
                    </div>
                    <div class="offline-progress" id="offlineProgress" style="display:none">
                        <div class="offline-bar"><div class="offline-fill" id="offlineFill"></div></div>
                        <div class="offline-label" id="offlineLabel"></div>
                    </div>
                    <div class="surah-grid" id="surahGrid"></div>
                </div>
                <div class="s-reader2" id="surahReaderView">
                    <div class="r-head2">
                        <button class="r-btn2" onclick="backToSurahList()">→ القائمة</button>
                        <div class="r-title2">
                            <h3 id="readerTitle"></h3>
                            <div class="r-meta2" id="readerInfo"></div>
                        </div>
                        <div class="r-nav2">
                            <button class="r-btn2" onclick="navSurah(-1)" id="prevSurahBtn">السابقة →</button>
                            <button class="r-btn2" id="bmSurahBtn" onclick="toggleSurahBM()">🔖</button>
                            <button class="r-btn2" onclick="navSurah(1)" id="nextSurahBtn">← التالية</button>
                        </div>
                    </div>
                    <div id="readerContent"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Generate animated stars
    function createStars() {
        const container = document.getElementById('stars');
        const starCount = 100;

        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.className = 'star';

            // Random position
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';

            // Random size (1-3px)
            const size = Math.random() * 2 + 1;
            star.style.width = size + 'px';
            star.style.height = size + 'px';

            // Random animation duration (3-8 seconds)
            star.style.setProperty('--duration', (Math.random() * 5 + 3) + 's');

            // Random opacity (0.3-0.8)
            star.style.setProperty('--opacity', Math.random() * 0.5 + 0.3);

            // Random animation delay
            star.style.animationDelay = Math.random() * 5 + 's';

            container.appendChild(star);
        }
    }

    // Initialize stars
    createStars();

    // Scroll to top button visibility
    const scrollTopBtn = document.getElementById('scrollTopBtn');
    window.addEventListener('scroll', function() {
        if (window.scrollY > 300) {
            scrollTopBtn.classList.add('visible');
        } else {
            scrollTopBtn.classList.remove('visible');
        }
    });

    function switchTab(tabId, button) {
        // Hide all content areas
        const contentAreas = document.querySelectorAll('.content-area');
        contentAreas.forEach(area => area.classList.remove('active'));

        // Remove active class from all buttons
        const buttons = document.querySelectorAll('.tab-btn');
        buttons.forEach(btn => btn.classList.remove('active'));

        // Show selected tab
        document.getElementById(tabId).classList.add('active');
        button.classList.add('active');

        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Init Quran browser when tab7 is shown
        if (tabId === 'tab7') initQuran();
        // Init tools when tools tab is shown
        if (tabId === 'tabTools') initTools();
        // Init home data
        if (tabId === 'tabHome') initHome();
    }

    // Sub-navigation within tabs
    function switchSub(tabId, subId, btn) {
        var tab = document.getElementById(tabId);
        if (!tab) return;
        tab.querySelectorAll('.sub-section').forEach(function(s) { s.classList.remove('active'); });
        tab.querySelectorAll('.sub-nav-btn').forEach(function(b) { b.classList.remove('active'); });
        var sub = document.getElementById(subId);
        if (sub) sub.classList.add('active');
        if (btn) btn.classList.add('active');
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'ArrowRight') {
            const currentBtn = document.querySelector('.tab-btn.active');
            const nextBtn = currentBtn.nextElementSibling;
            if (nextBtn && nextBtn.classList.contains('tab-btn')) {
                nextBtn.click();
            }
        } else if ((e.ctrlKey || e.metaKey) && e.key === 'ArrowLeft') {
            const currentBtn = document.querySelector('.tab-btn.active');
            const prevBtn = currentBtn.previousElementSibling;
            if (prevBtn && prevBtn.classList.contains('tab-btn')) {
                prevBtn.click();
            }
        }
    });

    // Add subtle parallax effect to stars on scroll
    window.addEventListener('scroll', function() {
        const scrollTop = window.scrollY;
        const stars = document.getElementById('stars');
        stars.style.transform = `translateY(${scrollTop * 0.1}px)`;
    });
</script>

<script>
    // ═══════════════════════════════════════
    // Enhanced Quran Browser with Bookmarks & Auto-Resume
    // ═══════════════════════════════════════
    const SURAH_DATA = [
        {n:1,name:"الفاتحة",en:"Al-Fatihah",ayahs:7,type:"meccan"},
        {n:2,name:"البقرة",en:"Al-Baqarah",ayahs:286,type:"medinan"},
        {n:3,name:"آل عمران",en:"Aal-Imran",ayahs:200,type:"medinan"},
        {n:4,name:"النساء",en:"An-Nisa",ayahs:176,type:"medinan"},
        {n:5,name:"المائدة",en:"Al-Ma'idah",ayahs:120,type:"medinan"},
        {n:6,name:"الأنعام",en:"Al-An'am",ayahs:165,type:"meccan"},
        {n:7,name:"الأعراف",en:"Al-A'raf",ayahs:206,type:"meccan"},
        {n:8,name:"الأنفال",en:"Al-Anfal",ayahs:75,type:"medinan"},
        {n:9,name:"التوبة",en:"At-Tawbah",ayahs:129,type:"medinan"},
        {n:10,name:"يونس",en:"Yunus",ayahs:109,type:"meccan"},
        {n:11,name:"هود",en:"Hud",ayahs:123,type:"meccan"},
        {n:12,name:"يوسف",en:"Yusuf",ayahs:111,type:"meccan"},
        {n:13,name:"الرعد",en:"Ar-Ra'd",ayahs:43,type:"medinan"},
        {n:14,name:"إبراهيم",en:"Ibrahim",ayahs:52,type:"meccan"},
        {n:15,name:"الحجر",en:"Al-Hijr",ayahs:99,type:"meccan"},
        {n:16,name:"النحل",en:"An-Nahl",ayahs:128,type:"meccan"},
        {n:17,name:"الإسراء",en:"Al-Isra",ayahs:111,type:"meccan"},
        {n:18,name:"الكهف",en:"Al-Kahf",ayahs:110,type:"meccan"},
        {n:19,name:"مريم",en:"Maryam",ayahs:98,type:"meccan"},
        {n:20,name:"طه",en:"Ta-Ha",ayahs:135,type:"meccan"},
        {n:21,name:"الأنبياء",en:"Al-Anbiya",ayahs:112,type:"meccan"},
        {n:22,name:"الحج",en:"Al-Hajj",ayahs:78,type:"medinan"},
        {n:23,name:"المؤمنون",en:"Al-Mu'minun",ayahs:118,type:"meccan"},
        {n:24,name:"النور",en:"An-Nur",ayahs:64,type:"medinan"},
        {n:25,name:"الفرقان",en:"Al-Furqan",ayahs:77,type:"meccan"},
        {n:26,name:"الشعراء",en:"Ash-Shu'ara",ayahs:227,type:"meccan"},
        {n:27,name:"النمل",en:"An-Naml",ayahs:93,type:"meccan"},
        {n:28,name:"القصص",en:"Al-Qasas",ayahs:88,type:"meccan"},
        {n:29,name:"العنكبوت",en:"Al-Ankabut",ayahs:69,type:"meccan"},
        {n:30,name:"الروم",en:"Ar-Rum",ayahs:60,type:"meccan"},
        {n:31,name:"لقمان",en:"Luqman",ayahs:34,type:"meccan"},
        {n:32,name:"السجدة",en:"As-Sajdah",ayahs:30,type:"meccan"},
        {n:33,name:"الأحزاب",en:"Al-Ahzab",ayahs:73,type:"medinan"},
        {n:34,name:"سبأ",en:"Saba",ayahs:54,type:"meccan"},
        {n:35,name:"فاطر",en:"Fatir",ayahs:45,type:"meccan"},
        {n:36,name:"يس",en:"Ya-Sin",ayahs:83,type:"meccan"},
        {n:37,name:"الصافات",en:"As-Saffat",ayahs:182,type:"meccan"},
        {n:38,name:"ص",en:"Sad",ayahs:88,type:"meccan"},
        {n:39,name:"الزمر",en:"Az-Zumar",ayahs:75,type:"meccan"},
        {n:40,name:"غافر",en:"Ghafir",ayahs:85,type:"meccan"},
        {n:41,name:"فصلت",en:"Fussilat",ayahs:54,type:"meccan"},
        {n:42,name:"الشورى",en:"Ash-Shura",ayahs:53,type:"meccan"},
        {n:43,name:"الزخرف",en:"Az-Zukhruf",ayahs:89,type:"meccan"},
        {n:44,name:"الدخان",en:"Ad-Dukhan",ayahs:59,type:"meccan"},
        {n:45,name:"الجاثية",en:"Al-Jathiyah",ayahs:37,type:"meccan"},
        {n:46,name:"الأحقاف",en:"Al-Ahqaf",ayahs:35,type:"meccan"},
        {n:47,name:"محمد",en:"Muhammad",ayahs:38,type:"medinan"},
        {n:48,name:"الفتح",en:"Al-Fath",ayahs:29,type:"medinan"},
        {n:49,name:"الحجرات",en:"Al-Hujurat",ayahs:18,type:"medinan"},
        {n:50,name:"ق",en:"Qaf",ayahs:45,type:"meccan"},
        {n:51,name:"الذاريات",en:"Adh-Dhariyat",ayahs:60,type:"meccan"},
        {n:52,name:"الطور",en:"At-Tur",ayahs:49,type:"meccan"},
        {n:53,name:"النجم",en:"An-Najm",ayahs:62,type:"meccan"},
        {n:54,name:"القمر",en:"Al-Qamar",ayahs:55,type:"meccan"},
        {n:55,name:"الرحمن",en:"Ar-Rahman",ayahs:78,type:"medinan"},
        {n:56,name:"الواقعة",en:"Al-Waqi'ah",ayahs:96,type:"meccan"},
        {n:57,name:"الحديد",en:"Al-Hadid",ayahs:29,type:"medinan"},
        {n:58,name:"المجادلة",en:"Al-Mujadilah",ayahs:22,type:"medinan"},
        {n:59,name:"الحشر",en:"Al-Hashr",ayahs:24,type:"medinan"},
        {n:60,name:"الممتحنة",en:"Al-Mumtahanah",ayahs:13,type:"medinan"},
        {n:61,name:"الصف",en:"As-Saff",ayahs:14,type:"medinan"},
        {n:62,name:"الجمعة",en:"Al-Jumu'ah",ayahs:11,type:"medinan"},
        {n:63,name:"المنافقون",en:"Al-Munafiqun",ayahs:11,type:"medinan"},
        {n:64,name:"التغابن",en:"At-Taghabun",ayahs:18,type:"medinan"},
        {n:65,name:"الطلاق",en:"At-Talaq",ayahs:12,type:"medinan"},
        {n:66,name:"التحريم",en:"At-Tahrim",ayahs:12,type:"medinan"},
        {n:67,name:"الملك",en:"Al-Mulk",ayahs:30,type:"meccan"},
        {n:68,name:"القلم",en:"Al-Qalam",ayahs:52,type:"meccan"},
        {n:69,name:"الحاقة",en:"Al-Haqqah",ayahs:52,type:"meccan"},
        {n:70,name:"المعارج",en:"Al-Ma'arij",ayahs:44,type:"meccan"},
        {n:71,name:"نوح",en:"Nuh",ayahs:28,type:"meccan"},
        {n:72,name:"الجن",en:"Al-Jinn",ayahs:28,type:"meccan"},
        {n:73,name:"المزمل",en:"Al-Muzzammil",ayahs:20,type:"meccan"},
        {n:74,name:"المدثر",en:"Al-Muddathir",ayahs:56,type:"meccan"},
        {n:75,name:"القيامة",en:"Al-Qiyamah",ayahs:40,type:"meccan"},
        {n:76,name:"الإنسان",en:"Al-Insan",ayahs:31,type:"medinan"},
        {n:77,name:"المرسلات",en:"Al-Mursalat",ayahs:50,type:"meccan"},
        {n:78,name:"النبأ",en:"An-Naba",ayahs:40,type:"meccan"},
        {n:79,name:"النازعات",en:"An-Nazi'at",ayahs:46,type:"meccan"},
        {n:80,name:"عبس",en:"Abasa",ayahs:42,type:"meccan"},
        {n:81,name:"التكوير",en:"At-Takwir",ayahs:29,type:"meccan"},
        {n:82,name:"الانفطار",en:"Al-Infitar",ayahs:19,type:"meccan"},
        {n:83,name:"المطففين",en:"Al-Mutaffifin",ayahs:36,type:"meccan"},
        {n:84,name:"الانشقاق",en:"Al-Inshiqaq",ayahs:25,type:"meccan"},
        {n:85,name:"البروج",en:"Al-Buruj",ayahs:22,type:"meccan"},
        {n:86,name:"الطارق",en:"At-Tariq",ayahs:17,type:"meccan"},
        {n:87,name:"الأعلى",en:"Al-A'la",ayahs:19,type:"meccan"},
        {n:88,name:"الغاشية",en:"Al-Ghashiyah",ayahs:26,type:"meccan"},
        {n:89,name:"الفجر",en:"Al-Fajr",ayahs:30,type:"meccan"},
        {n:90,name:"البلد",en:"Al-Balad",ayahs:20,type:"meccan"},
        {n:91,name:"الشمس",en:"Ash-Shams",ayahs:15,type:"meccan"},
        {n:92,name:"الليل",en:"Al-Layl",ayahs:21,type:"meccan"},
        {n:93,name:"الضحى",en:"Ad-Duha",ayahs:11,type:"meccan"},
        {n:94,name:"الشرح",en:"Ash-Sharh",ayahs:8,type:"meccan"},
        {n:95,name:"التين",en:"At-Tin",ayahs:8,type:"meccan"},
        {n:96,name:"العلق",en:"Al-Alaq",ayahs:19,type:"meccan"},
        {n:97,name:"القدر",en:"Al-Qadr",ayahs:5,type:"meccan"},
        {n:98,name:"البينة",en:"Al-Bayyinah",ayahs:8,type:"medinan"},
        {n:99,name:"الزلزلة",en:"Az-Zalzalah",ayahs:8,type:"medinan"},
        {n:100,name:"العاديات",en:"Al-Adiyat",ayahs:11,type:"meccan"},
        {n:101,name:"القارعة",en:"Al-Qari'ah",ayahs:11,type:"meccan"},
        {n:102,name:"التكاثر",en:"At-Takathur",ayahs:8,type:"meccan"},
        {n:103,name:"العصر",en:"Al-Asr",ayahs:3,type:"meccan"},
        {n:104,name:"الهمزة",en:"Al-Humazah",ayahs:9,type:"meccan"},
        {n:105,name:"الفيل",en:"Al-Fil",ayahs:5,type:"meccan"},
        {n:106,name:"قريش",en:"Quraysh",ayahs:4,type:"meccan"},
        {n:107,name:"الماعون",en:"Al-Ma'un",ayahs:7,type:"meccan"},
        {n:108,name:"الكوثر",en:"Al-Kawthar",ayahs:3,type:"meccan"},
        {n:109,name:"الكافرون",en:"Al-Kafirun",ayahs:6,type:"meccan"},
        {n:110,name:"النصر",en:"An-Nasr",ayahs:3,type:"medinan"},
        {n:111,name:"المسد",en:"Al-Masad",ayahs:5,type:"meccan"},
        {n:112,name:"الإخلاص",en:"Al-Ikhlas",ayahs:4,type:"meccan"},
        {n:113,name:"الفلق",en:"Al-Falaq",ayahs:5,type:"meccan"},
        {n:114,name:"الناس",en:"An-Nas",ayahs:6,type:"meccan"}
    ];

    let currentSurahNum = 0, curFilter = 'all';
    const BM_KEY = 'iq_bookmarks', LR_KEY = 'iq_last_read';
    function toArabicNum(n) { return String(n).replace(/\d/g, function(d) { return '٠١٢٣٤٥٦٧٨٩'[d]; }); }

    function getBM() { try { return JSON.parse(localStorage.getItem(BM_KEY)) || []; } catch(e) { return []; } }
    function saveBM(bm) { localStorage.setItem(BM_KEY, JSON.stringify(bm)); }
    function getLR() { try { return JSON.parse(localStorage.getItem(LR_KEY)); } catch(e) { return null; } }
    function saveLR(d) { localStorage.setItem(LR_KEY, JSON.stringify(d)); }

    function initQuran() { renderSurahGrid2(); renderBM(); renderLR(); checkOfflineStatus(); updateHLCount(); }

    function getHighlightedSurahs() {
        try { return JSON.parse(localStorage.getItem('iq_hl_surahs')) || []; } catch(e) { return []; }
    }
    function saveHighlightedSurahs(arr) {
        try { localStorage.setItem('iq_hl_surahs', JSON.stringify(arr)); } catch(e) {}
    }
    function toggleSurahHL(num, e) {
        e.stopPropagation();
        var hl = getHighlightedSurahs();
        var idx = hl.indexOf(num);
        if (idx >= 0) hl.splice(idx, 1); else hl.push(num);
        saveHighlightedSurahs(hl);
        renderSurahGrid2();
        updateHLCount();
    }
    function updateHLCount() {
        var btn = document.getElementById('hlFilterBtn');
        if (!btn) return;
        var count = getHighlightedSurahs().length;
        btn.textContent = 'المميزة' + (count ? ' (' + count + ')' : '');
    }

    function renderSurahGrid2() {
        const grid = document.getElementById('surahGrid');
        if (!grid) return;
        const q = (document.getElementById('surahSearch').value || '').trim().toLowerCase();
        const bm = getBM();
        const hl = getHighlightedSurahs();
        grid.innerHTML = SURAH_DATA.filter(function(s) {
            if (curFilter === 'mec' && s.type !== 'meccan') return false;
            if (curFilter === 'med' && s.type !== 'medinan') return false;
            if (curFilter === 'hl' && hl.indexOf(s.n) < 0) return false;
            if (q && !s.name.includes(q) && !s.en.toLowerCase().includes(q) && !String(s.n).includes(q)) return false;
            return true;
        }).map(function(s) {
            const hasBM = bm.some(function(b) { return b.s === s.n; });
            const isHL = hl.indexOf(s.n) >= 0;
            const tCls = s.type === 'meccan' ? 'meccan' : 'medinan';
            const tLbl = s.type === 'meccan' ? 'مكية' : 'مدنية';
            return '<div class="surah-card'+(isHL?' highlighted':'')+'" onclick="openSurah('+s.n+')">'
                + '<button class="surah-hl-btn'+(isHL?' on':'')+'" onclick="toggleSurahHL('+s.n+',event)" title="تمييز السورة">'+(isHL?'★':'☆')+'</button>'
                + (hasBM ? '<span style="position:absolute;top:8px;left:38px;color:var(--gold-bright)">🔖</span>' : '')
                + '<div class="surah-card-num">'+s.n+'</div>'
                + '<div class="surah-card-info">'
                + '<div class="surah-card-name">سورة '+s.name+'</div>'
                + '<div class="surah-card-meta">'+s.ayahs+' آية <span class="surah-card-type '+tCls+'">'+tLbl+'</span></div>'
                + '</div></div>';
        }).join('') || '<div style="text-align:center;padding:40px;color:var(--text-muted);font-size:1.3em;grid-column:1/-1">لا توجد نتائج</div>';
    }

    function filterSurahs2() { renderSurahGrid2(); }

    function setQFilter(f, btn) {
        curFilter = f;
        document.querySelectorAll('.q-filter2').forEach(function(b) { b.classList.remove('on'); });
        btn.classList.add('on');
        renderSurahGrid2();
    }

    function renderBM() {
        const bar = document.getElementById('bmBar');
        if (!bar) return;
        const bm = getBM();
        if (!bm.length) { bar.innerHTML = ''; return; }
        bar.innerHTML = bm.map(function(b, i) {
            const s = SURAH_DATA.find(function(x) { return x.n === b.s; });
            if (!s) return '';
            const label = b.a ? s.name + ' - آية ' + b.a : s.name;
            return '<div class="bm-chip" onclick="openSurah('+b.s+(b.a?','+b.a:'')+')">'
                + '🔖 ' + label
                + ' <span class="bm-x" onclick="event.stopPropagation();removeBM('+i+')">✕</span>'
                + '</div>';
        }).join('');
    }

    function removeBM(idx) {
        const bm = getBM(); bm.splice(idx, 1); saveBM(bm);
        renderBM(); renderSurahGrid2();
    }

    function renderLR() {
        const lr = getLR();
        const card = document.getElementById('lastReadCard');
        if (!card) return;
        if (!lr) { card.style.display = 'none'; return; }
        const s = SURAH_DATA.find(function(x) { return x.n === lr.s; });
        if (!s) { card.style.display = 'none'; return; }
        document.getElementById('lrTitle').textContent = 'متابعة القراءة - سورة ' + s.name;
        document.getElementById('lrDetail').textContent = lr.a ? 'الآية ' + lr.a + ' من ' + s.ayahs : s.ayahs + ' آية';
        card.style.display = 'flex';
    }

    function resumeLastRead() {
        const lr = getLR();
        if (lr) openSurah(lr.s, lr.a);
    }

    async function openSurah(num, scrollToAyah) {
        currentSurahNum = num;
        const surah = SURAH_DATA.find(function(s) { return s.n === num; });

        document.getElementById('surahListView').classList.add('off');
        document.getElementById('surahReaderView').classList.add('on');

        document.getElementById('readerTitle').textContent = 'سورة ' + surah.name;
        document.getElementById('readerInfo').textContent = surah.en + ' | ' + surah.ayahs + ' آية | ' + (surah.type === 'meccan' ? 'مكية' : 'مدنية');

        document.getElementById('prevSurahBtn').disabled = (num <= 1);
        document.getElementById('nextSurahBtn').disabled = (num >= 114);

        const bm = getBM();
        var bmBtn = document.getElementById('bmSurahBtn');
        if (bmBtn) bmBtn.classList.toggle('bm-on', bm.some(function(b) { return b.s === num && !b.a; }));

        document.getElementById('readerContent').innerHTML = '<div class="q-loading2">جاري تحميل السورة...<div class="q-spinner2"></div></div>';
        window.scrollTo({ top: 0, behavior: 'smooth' });

        try {
            const ayahs = await fetchSurah(num);
            let html = '';
            if (num !== 1 && num !== 9) {
                html += '<div class="bismillah-box2">بِسْمِ ٱللَّهِ ٱلرَّحْمَـٰنِ ٱلرَّحِيمِ</div>';
            }
            const ayahBMs = bm.filter(function(b) { return b.s === num && b.a; });
            const lr = getLR();
            html += '<div class="surah-para">';
            ayahs.forEach(function(a) {
                var text = a.text;
                if (a.numberInSurah === 1 && num !== 1 && num !== 9) {
                    text = text.replace(/^بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ\s*/, '');
                }
                var isABM = ayahBMs.some(function(b) { return b.a === a.numberInSurah; });
                var isLR = lr && lr.s === num && lr.a === a.numberInSurah;
                var cls = 'ayah-span' + (isLR ? ' lr-hl' : '') + (isABM ? ' bm-hl' : '');
                var anum = toArabicNum(a.numberInSurah);
                html += '<span class="'+cls+'" data-ayah="'+a.numberInSurah+'" id="ayah-'+a.numberInSurah+'">'+text+'</span>'
                    + '<span class="ayah-num-inline'+(isABM?' on':'')+'" onclick="toggleAyahBM('+num+','+a.numberInSurah+',this)"> ﴿'+anum+'﴾ </span>';
            });
            html += '</div>';
            document.getElementById('readerContent').innerHTML = html;
            var para = document.querySelector('.surah-para');
            if (para) para.addEventListener('click', onAyahTap);
        } catch (err) {
            document.getElementById('readerContent').innerHTML =
                '<div class="q-loading2" style="color:#e74c3c">حدث خطأ في تحميل السورة. تأكد من اتصال الإنترنت.<br><br>'
                + '<button class="r-btn2" onclick="openSurah('+num+')">إعادة المحاولة</button></div>';
            return;
        }

        hideAyahPopup();
        saveLR({ s: num, a: scrollToAyah || 1, t: Date.now() });

        if (scrollToAyah) {
            setTimeout(function() {
                var el = document.getElementById('ayah-' + scrollToAyah);
                if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 150);
        }
        setupAutoSave();
    }

    async function fetchSurah(num) {
        const cacheKey = 'quran-surah-' + num;
        const cached = localStorage.getItem(cacheKey);
        if (cached) return JSON.parse(cached);

        const resp = await fetch('https://api.alquran.cloud/v1/surah/' + num);
        if (!resp.ok) throw new Error('API error');
        const data = await resp.json();
        const ayahs = data.data.ayahs.map(function(a) { return { text: a.text, numberInSurah: a.numberInSurah }; });

        try { localStorage.setItem(cacheKey, JSON.stringify(ayahs)); } catch (e) {}
        return ayahs;
    }

    async function downloadAllSurahs() {
        var btn = document.getElementById('offlineBtn');
        var prog = document.getElementById('offlineProgress');
        var fill = document.getElementById('offlineFill');
        var label = document.getElementById('offlineLabel');

        // Count already cached
        var cached = 0;
        for (var i = 1; i <= 114; i++) {
            if (localStorage.getItem('quran-surah-' + i)) cached++;
        }
        if (cached === 114) {
            btn.textContent = 'تم التحميل بالكامل ✓';
            btn.classList.add('on');
            return;
        }

        btn.disabled = true;
        btn.textContent = 'جاري التحميل...';
        prog.style.display = 'block';
        var done = 0, failed = 0;

        for (var i = 1; i <= 114; i++) {
            if (localStorage.getItem('quran-surah-' + i)) {
                done++;
                fill.style.width = Math.round((done / 114) * 100) + '%';
                label.textContent = done + ' / 114';
                continue;
            }
            try {
                await fetchSurah(i);
                done++;
            } catch (e) {
                done++;
                failed++;
            }
            fill.style.width = Math.round((done / 114) * 100) + '%';
            label.textContent = done + ' / 114' + (failed ? ' (' + failed + ' فشل)' : '');
            // Small delay to avoid hammering the API
            await new Promise(function(r) { setTimeout(r, 80); });
        }

        btn.disabled = false;
        if (failed === 0) {
            btn.textContent = 'تم التحميل بالكامل ✓';
            btn.classList.add('on');
            label.textContent = 'جميع السور متاحة بدون إنترنت';
        } else {
            btn.textContent = 'إعادة المحاولة (' + failed + ' متبقية)';
            label.textContent = 'بعض السور لم تُحمّل - حاول مرة أخرى';
        }
    }

    function checkOfflineStatus() {
        var cached = 0;
        for (var i = 1; i <= 114; i++) {
            if (localStorage.getItem('quran-surah-' + i)) cached++;
        }
        var btn = document.getElementById('offlineBtn');
        if (!btn) return;
        if (cached === 114) {
            btn.textContent = 'متاح بدون إنترنت ✓';
            btn.classList.add('on');
        } else if (cached > 0) {
            btn.textContent = 'تحميل للقراءة بدون إنترنت (' + cached + '/114)';
        }
    }

    function backToSurahList() {
        document.getElementById('surahReaderView').classList.remove('on');
        document.getElementById('surahListView').classList.remove('off');
        currentSurahNum = 0;
        renderBM(); renderLR(); renderSurahGrid2();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function navSurah(dir) {
        var next = currentSurahNum + dir;
        if (next >= 1 && next <= 114) openSurah(next);
    }

    function toggleSurahBM() {
        if (!currentSurahNum) return;
        var bm = getBM();
        var idx = bm.findIndex(function(b) { return b.s === currentSurahNum && !b.a; });
        if (idx >= 0) { bm.splice(idx, 1); } else { bm.push({ s: currentSurahNum }); }
        saveBM(bm);
        var btn = document.getElementById('bmSurahBtn');
        if (btn) btn.classList.toggle('bm-on', idx < 0);
    }

    function toggleAyahBM(surah, ayah, el) {
        var bm = getBM();
        var idx = bm.findIndex(function(b) { return b.s === surah && b.a === ayah; });
        var ayahSpan = document.getElementById('ayah-' + ayah);
        if (idx >= 0) { bm.splice(idx, 1); el.classList.remove('on'); if (ayahSpan) ayahSpan.classList.remove('bm-hl'); }
        else { bm.push({ s: surah, a: ayah }); el.classList.add('on'); if (ayahSpan) ayahSpan.classList.add('bm-hl'); }
        saveBM(bm);
    }

    // --- Ayah tap-to-select ---
    var selectedAyahNum = null;
    function onAyahTap(e) {
        var span = e.target.closest('.ayah-span');
        if (!span || !currentSurahNum) return;
        var ayahNum = parseInt(span.dataset.ayah);
        if (selectedAyahNum === ayahNum) { hideAyahPopup(); return; }
        document.querySelectorAll('.ayah-span.selected').forEach(function(el) { el.classList.remove('selected'); });
        span.classList.add('selected');
        selectedAyahNum = ayahNum;
        var surah = SURAH_DATA.find(function(s) { return s.n === currentSurahNum; });
        var label = 'آية ' + ayahNum + ' - سورة ' + surah.name;
        document.getElementById('ayahPopupLabel').textContent = label;
        var bm = getBM();
        var isBM = bm.some(function(b) { return b.s === currentSurahNum && b.a === ayahNum; });
        document.getElementById('ayahPopupSave').textContent = isBM ? 'إزالة 🔖' : 'حفظ 🔖';
        document.getElementById('ayahPopup').classList.add('show');
    }
    function hideAyahPopup() {
        document.getElementById('ayahPopup').classList.remove('show');
        document.querySelectorAll('.ayah-span.selected').forEach(function(el) { el.classList.remove('selected'); });
        selectedAyahNum = null;
    }
    function saveSelectedAyah() {
        if (!selectedAyahNum || !currentSurahNum) return;
        var numEl = null;
        var nums = document.querySelectorAll('.ayah-num-inline');
        for (var i = 0; i < nums.length; i++) {
            var prev = nums[i].previousElementSibling;
            if (prev && parseInt(prev.dataset.ayah) === selectedAyahNum) { numEl = nums[i]; break; }
        }
        if (numEl) toggleAyahBM(currentSurahNum, selectedAyahNum, numEl);
        var bm = getBM();
        var isBM = bm.some(function(b) { return b.s === currentSurahNum && b.a === selectedAyahNum; });
        document.getElementById('ayahPopupSave').textContent = isBM ? 'إزالة 🔖' : 'حفظ 🔖';
    }
    function resumeFromSelected() {
        if (!selectedAyahNum || !currentSurahNum) return;
        saveLR({ s: currentSurahNum, a: selectedAyahNum, t: Date.now() });
        document.querySelectorAll('.ayah-span.lr-hl').forEach(function(el) { el.classList.remove('lr-hl'); });
        var span = document.getElementById('ayah-' + selectedAyahNum);
        if (span) span.classList.add('lr-hl');
        hideAyahPopup();
    }
    document.addEventListener('click', function(e) {
        if (e.target.closest('.ayah-popup') || e.target.closest('.ayah-span') || e.target.closest('.ayah-num-inline')) return;
        hideAyahPopup();
    });

    // ═══════════════════════════════════════
    // Tafseer Feature
    // ═══════════════════════════════════════
    var currentTafseerSlug = 'ar-tafseer-al-saddi';
    var tafseerCache = {};

    function openTafseer() {
        if (!selectedAyahNum || !currentSurahNum) return;
        var surah = SURAH_DATA.find(function(s) { return s.n === currentSurahNum; });
        document.getElementById('tafseerTitle').textContent = 'تفسير آية ' + selectedAyahNum + ' - سورة ' + surah.name;
        document.getElementById('tafseerOverlay').classList.add('show');
        document.getElementById('tafseerPanel').classList.add('show');
        fetchTafseer(currentTafseerSlug, currentSurahNum, selectedAyahNum);
    }

    function closeTafseer() {
        document.getElementById('tafseerOverlay').classList.remove('show');
        document.getElementById('tafseerPanel').classList.remove('show');
    }

    function switchTafseer(slug, btn) {
        currentTafseerSlug = slug;
        document.querySelectorAll('.tafseer-tab').forEach(function(t) { t.classList.remove('active'); });
        if (btn) btn.classList.add('active');
        if (selectedAyahNum && currentSurahNum) {
            fetchTafseer(slug, currentSurahNum, selectedAyahNum);
        }
    }

    function fetchTafseer(slug, surah, ayah) {
        var body = document.getElementById('tafseerBody');
        var cacheKey = slug + '-' + surah + '-' + ayah;

        if (tafseerCache[cacheKey]) {
            renderTafseer(tafseerCache[cacheKey], surah, ayah);
            return;
        }

        body.innerHTML = '<div class="tafseer-loading">جاري تحميل التفسير...</div>';

        var url = 'https://cdn.jsdelivr.net/gh/spa5k/tafsir_api@main/tafsir/' + slug + '/' + surah + '/' + ayah + '.json';
        fetch(url)
            .then(function(r) {
                if (!r.ok) throw new Error('Not found');
                return r.json();
            })
            .then(function(d) {
                tafseerCache[cacheKey] = d.text || '';
                renderTafseer(d.text || '', surah, ayah);
            })
            .catch(function() {
                body.innerHTML = '<div class="tafseer-loading">لم يتوفر تفسير لهذه الآية. جرب تفسيراً آخر.</div>';
            });
    }

    function renderTafseer(text, surah, ayah) {
        var body = document.getElementById('tafseerBody');
        var ayahSpan = document.getElementById('ayah-' + ayah);
        var ayahText = ayahSpan ? ayahSpan.textContent.trim() : '';
        var html = '';
        if (ayahText) {
            html += '<div class="tafseer-ayah-text">﴿ ' + ayahText + ' ﴾</div>';
        }
        html += '<div>' + text.replace(/\n/g, '<br>') + '</div>';
        body.innerHTML = html;
        body.scrollTop = 0;
    }

    var autoSaveTimer = null;
    function setupAutoSave() {
        window.removeEventListener('scroll', onReaderScroll);
        window.addEventListener('scroll', onReaderScroll);
    }
    function onReaderScroll() {
        clearTimeout(autoSaveTimer);
        autoSaveTimer = setTimeout(function() {
            if (!currentSurahNum) return;
            var spans = document.querySelectorAll('.ayah-span');
            var visAyah = null;
            for (var i = 0; i < spans.length; i++) {
                var r = spans[i].getBoundingClientRect();
                if (r.top >= -100 && r.top <= window.innerHeight) {
                    visAyah = parseInt(spans[i].dataset.ayah);
                    break;
                }
            }
            if (visAyah) saveLR({ s: currentSurahNum, a: visAyah, t: Date.now() });
        }, 600);
    }

    // Initialize surah grid
    renderSurahGrid2();
</script>

<script>
    // ═══════════════════════════════════════
    // Home Tab: Prayer Times, Daily Ayah, Hijri Date
    // ═══════════════════════════════════════
    var prayerTimesCache = null;

    var userLat = null, userLng = null;
    var currentHijriDay = 0, currentHijriMonth = 0, currentHijriYear = 0;

    function initHome() {
        loadDailyAyah();
        if (!prayerTimesCache) fetchPrayerTimes();
        startLiveCountdown();
    }

    function loadDailyAyah() {
        var textEl = document.getElementById('dailyAyahText');
        var refEl = document.getElementById('dailyAyahRef');
        if (!textEl) return;
        // Pick a random ayah from a curated set of beautiful verses
        var dailyVerses = [
            {s:2,a:286},{s:3,a:8},{s:2,a:201},{s:21,a:87},{s:40,a:60},
            {s:65,a:3},{s:94,a:6},{s:2,a:152},{s:13,a:28},{s:3,a:139},
            {s:39,a:53},{s:16,a:97},{s:29,a:69},{s:73,a:8},{s:6,a:162}
        ];
        var dayIdx = Math.floor(Date.now() / 86400000) % dailyVerses.length;
        var pick = dailyVerses[dayIdx];
        fetch('https://api.alquran.cloud/v1/ayah/' + pick.s + ':' + pick.a)
            .then(function(r) { return r.json(); })
            .then(function(d) {
                if (d.code === 200) {
                    textEl.textContent = d.data.text;
                    var surahName = SURAH_DATA.find(function(x) { return x.n === pick.s; });
                    if (refEl) {
                        refEl.style.display = 'block';
                        refEl.textContent = 'سورة ' + (surahName ? surahName.name : pick.s) + ' - آية ' + pick.a;
                    }
                }
            }).catch(function() {
                textEl.textContent = 'وَإِذَا سَأَلَكَ عِبَادِي عَنِّي فَإِنِّي قَرِيبٌ';
                if (refEl) { refEl.style.display = 'block'; refEl.textContent = 'سورة البقرة - آية 186'; }
            });
    }

    function fetchPrayerTimes() {
        var btn = document.getElementById('refreshPrayerBtn');
        if (btn) btn.textContent = 'جاري التحديث...';

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(pos) {
                fetchPrayerByCoords(pos.coords.latitude, pos.coords.longitude);
            }, function() {
                // Default to Mecca if location denied
                fetchPrayerByCoords(21.4225, 39.8262);
            });
        } else {
            fetchPrayerByCoords(21.4225, 39.8262);
        }
    }

    function fetchPrayerByCoords(lat, lng) {
        userLat = lat; userLng = lng;
        try { localStorage.setItem('iq_coords', JSON.stringify({lat:lat,lng:lng})); } catch(e){}
        var today = new Date();
        var url = 'https://api.aladhan.com/v1/timings/' + Math.floor(today.getTime()/1000)
            + '?latitude=' + lat + '&longitude=' + lng + '&method=4';
        fetch(url).then(function(r) { return r.json(); }).then(function(d) {
            if (d.code === 200 && d.data && d.data.timings) {
                prayerTimesCache = d.data.timings;
                displayPrayerTimes(d.data.timings);
                updateLiveCountdown();
                updateFastingInfo();
                // Extract Hijri date from timings response
                if (d.data.date && d.data.date.hijri) {
                    var h = d.data.date.hijri;
                    var hijriEl = document.getElementById('hijriDate');
                    if (hijriEl) hijriEl.textContent = h.day + ' ' + h.month.ar + ' ' + h.year + ' هـ';
                    calculateEventCountdowns(parseInt(h.day), parseInt(h.month.number), parseInt(h.year));
                    // Store globally for Ramadan calendar
                    currentHijriDay = parseInt(h.day);
                    currentHijriMonth = parseInt(h.month.number);
                    currentHijriYear = parseInt(h.year);
                    // Auto-load Ramadan calendar
                    loadRamadanCalendar();
                }
                // Show location
                var locEl = document.getElementById('prayerLocation');
                if (locEl && d.data.meta && d.data.meta.timezone) {
                    locEl.textContent = d.data.meta.timezone;
                }
                // Save for offline
                try { localStorage.setItem('iq_prayer_times', JSON.stringify({t: Date.now(), data: d.data.timings, hijri: d.data.date ? d.data.date.hijri : null, lat:lat, lng:lng})); } catch(e){}
            }
        }).catch(function() {
            // Try offline cache
            try {
                var c = JSON.parse(localStorage.getItem('iq_prayer_times'));
                if (c && c.data) {
                    prayerTimesCache = c.data; displayPrayerTimes(c.data); updateLiveCountdown(); updateFastingInfo();
                    if (c.hijri) {
                        var hijriEl = document.getElementById('hijriDate');
                        if (hijriEl) hijriEl.textContent = c.hijri.day + ' ' + c.hijri.month.ar + ' ' + c.hijri.year + ' هـ';
                        calculateEventCountdowns(parseInt(c.hijri.day), parseInt(c.hijri.month.number), parseInt(c.hijri.year));
                        currentHijriDay = parseInt(c.hijri.day);
                        currentHijriMonth = parseInt(c.hijri.month.number);
                        currentHijriYear = parseInt(c.hijri.year);
                        loadRamadanCalendar();
                    }
                }
            } catch(e){}
        }).finally(function() {
            var btn = document.getElementById('refreshPrayerBtn');
            if (btn) btn.textContent = 'تحديث المواقيت';
        });
    }

    function displayPrayerTimes(t) {
        var map = {Fajr:'Fajr',Sunrise:'Sunrise',Dhuhr:'Dhuhr',Asr:'Asr',Maghrib:'Maghrib',Isha:'Isha'};
        var names = {Fajr:'الفجر',Sunrise:'الشروق',Dhuhr:'الظهر',Asr:'العصر',Maghrib:'المغرب',Isha:'العشاء'};
        var prefixes = ['home', 'tools'];
        var now = new Date();
        var nowMin = now.getHours() * 60 + now.getMinutes();
        var nextPrayer = null;

        Object.keys(map).forEach(function(key) {
            var time = t[key];
            prefixes.forEach(function(p) {
                var el = document.getElementById(p + key);
                if (el) el.textContent = time;
            });
            // Find next prayer
            if (time && !nextPrayer) {
                var parts = time.split(':');
                var pMin = parseInt(parts[0]) * 60 + parseInt(parts[1]);
                if (pMin > nowMin) nextPrayer = key;
            }
        });

        // Highlight next prayer
        if (nextPrayer) {
            prefixes.forEach(function(p) {
                var grid = document.getElementById(p + 'PrayerGrid');
                if (grid) {
                    grid.querySelectorAll('.prayer-card').forEach(function(c) { c.classList.remove('next'); });
                    var el = document.getElementById(p + nextPrayer);
                    if (el) el.closest('.prayer-card').classList.add('next');
                }
            });
        }
    }

    // ═══════════════════════════════════════
    // Event Countdowns (Ramadan, Eid al-Fitr, Eid al-Adha)
    // ═══════════════════════════════════════
    function calculateEventCountdowns(hDay, hMonth, hYear) {
        // Hijri months: 1=Muharram...9=Ramadan,10=Shawwal,12=DhulHijjah
        // Target events with their Hijri month and day
        var events = [
            { id: 'ramadan', month: 9, day: 1, name: 'رمضان' },
            { id: 'fitr', month: 10, day: 1, name: 'عيد الفطر' },
            { id: 'adha', month: 12, day: 10, name: 'عيد الأضحى' }
        ];
        var hijriMonthNames = ['','محرم','صفر','ربيع الأول','ربيع الثاني','جمادى الأولى','جمادى الآخرة','رجب','شعبان','رمضان','شوال','ذو القعدة','ذو الحجة'];
        // Approximate days in Hijri months (alternating 30/29)
        var mDays = [0,30,29,30,29,30,29,30,29,30,29,30,29];

        events.forEach(function(ev) {
            var targetMonth = ev.month, targetDay = ev.day;
            var targetYear = hYear;
            // If event already passed this Hijri year, target next year
            if (hMonth > targetMonth || (hMonth === targetMonth && hDay > targetDay)) {
                targetYear = hYear + 1;
            }
            // Calculate approximate days remaining
            var daysLeft = 0;
            if (hMonth === targetMonth && targetYear === hYear) {
                daysLeft = targetDay - hDay;
            } else {
                // Days left in current month
                daysLeft = mDays[hMonth] - hDay;
                // Full months in between
                var m = hMonth + 1;
                var y = hYear;
                while (!(m === targetMonth && y === targetYear)) {
                    if (m > 12) { m = 1; y++; }
                    if (m === targetMonth && y === targetYear) break;
                    daysLeft += mDays[m] || 30;
                    m++;
                }
                daysLeft += targetDay;
            }

            var daysEl = document.getElementById(ev.id + 'Days');
            var labelEl = document.getElementById(ev.id + 'Label');
            var dateEl = document.getElementById(ev.id + 'Date');
            var cardEl = document.getElementById('event' + ev.id.charAt(0).toUpperCase() + ev.id.slice(1));

            if (daysEl) {
                if (daysLeft === 0) {
                    daysEl.textContent = 'اليوم!';
                    labelEl.textContent = 'كل عام وأنتم بخير';
                    if (cardEl) cardEl.classList.add('active-event');
                } else if (hMonth === 9 && ev.id === 'ramadan') {
                    // We're IN Ramadan
                    daysEl.textContent = hDay;
                    labelEl.textContent = 'رمضان الآن - اليوم ' + hDay;
                    if (cardEl) cardEl.classList.add('active-event');
                } else {
                    daysEl.textContent = toArabicNum(daysLeft);
                    labelEl.textContent = daysLeft === 1 ? 'يوم واحد متبقي' : 'يوم متبقي';
                }
            }
            if (dateEl) dateEl.textContent = targetDay + ' ' + hijriMonthNames[targetMonth] + ' ' + targetYear + ' هـ';
        });
    }

    // ═══════════════════════════════════════
    // Live Prayer Countdown & Fasting Info
    // ═══════════════════════════════════════
    var liveCountdownInterval = null;
    var prayerOrder = ['Fajr','Sunrise','Dhuhr','Asr','Maghrib','Isha'];
    var prayerNames = {Fajr:'الفجر',Sunrise:'الشروق',Dhuhr:'الظهر',Asr:'العصر',Maghrib:'المغرب',Isha:'العشاء'};

    function startLiveCountdown() {
        if (liveCountdownInterval) clearInterval(liveCountdownInterval);
        liveCountdownInterval = setInterval(updateLiveCountdown, 1000);
        updateLiveCountdown();
    }

    function timeToMinutes(timeStr) {
        if (!timeStr) return -1;
        var parts = timeStr.split(':');
        return parseInt(parts[0]) * 60 + parseInt(parts[1]);
    }

    function formatCountdown(diffMs) {
        if (diffMs < 0) return '--:--:--';
        var totalSec = Math.floor(diffMs / 1000);
        var h = Math.floor(totalSec / 3600);
        var m = Math.floor((totalSec % 3600) / 60);
        var s = totalSec % 60;
        return (h < 10 ? '0' : '') + h + ':' + (m < 10 ? '0' : '') + m + ':' + (s < 10 ? '0' : '') + s;
    }

    function formatHoursMin(minutes) {
        if (minutes < 0) return '--';
        var h = Math.floor(minutes / 60);
        var m = minutes % 60;
        return h + 'h ' + m + 'm';
    }

    function updateLiveCountdown() {
        if (!prayerTimesCache) return;
        var now = new Date();
        var nowMs = now.getTime();
        var todayBase = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();

        var nextPrayer = null, nextPrayerMs = null;
        for (var i = 0; i < prayerOrder.length; i++) {
            var key = prayerOrder[i];
            var tStr = prayerTimesCache[key];
            if (!tStr) continue;
            var pMs = todayBase + timeToMinutes(tStr) * 60000;
            if (pMs > nowMs) {
                nextPrayer = key;
                nextPrayerMs = pMs;
                break;
            }
        }

        var nameEl = document.getElementById('nextPrayerName');
        var timerEl = document.getElementById('nextPrayerTimer');

        if (nextPrayer && nextPrayerMs) {
            if (nameEl) nameEl.textContent = prayerNames[nextPrayer] + ' - ' + prayerTimesCache[nextPrayer];
            if (timerEl) timerEl.textContent = formatCountdown(nextPrayerMs - nowMs);
        } else {
            // All prayers passed today, next is Fajr tomorrow
            if (nameEl) nameEl.textContent = 'الفجر غداً - ' + (prayerTimesCache.Fajr || '--:--');
            if (prayerTimesCache.Fajr) {
                var tomorrowFajr = todayBase + 86400000 + timeToMinutes(prayerTimesCache.Fajr) * 60000;
                if (timerEl) timerEl.textContent = formatCountdown(tomorrowFajr - nowMs);
            }
        }
    }

    function updateFastingInfo() {
        if (!prayerTimesCache) return;
        var now = new Date();
        var nowMs = now.getTime();
        var nowMin = now.getHours() * 60 + now.getMinutes();
        var todayBase = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();

        var fajrMin = timeToMinutes(prayerTimesCache.Fajr);
        var maghribMin = timeToMinutes(prayerTimesCache.Maghrib);

        // Fasting duration (Fajr to Maghrib)
        var durationEl = document.getElementById('fastingDuration');
        if (durationEl && fajrMin >= 0 && maghribMin >= 0) {
            durationEl.textContent = formatHoursMin(maghribMin - fajrMin);
        }

        // Labels and context
        var maghribLabelEl = document.querySelector('#fastingInfo .fasting-item:nth-child(2) .fasting-label');
        var fajrLabelEl = document.querySelector('#fastingInfo .fasting-item:nth-child(3) .fasting-label');
        var maghribEl = document.getElementById('maghribRemaining');
        var fajrEl = document.getElementById('fajrRemaining');

        // Time remaining till Maghrib
        if (maghribEl && maghribMin >= 0) {
            var maghribMs = todayBase + maghribMin * 60000;
            var diffMs = maghribMs - nowMs;
            if (diffMs > 0) {
                // Before Maghrib - show countdown
                if (maghribLabelEl) maghribLabelEl.textContent = 'باقي للمغرب';
                maghribEl.textContent = formatHoursMin(Math.ceil(diffMs / 60000));
            } else {
                // After Maghrib - show tomorrow's Maghrib countdown
                if (maghribLabelEl) maghribLabelEl.textContent = 'المغرب غداً بعد';
                var tomorrowMaghrib = maghribMs + 86400000;
                maghribEl.textContent = formatHoursMin(Math.ceil((tomorrowMaghrib - nowMs) / 60000));
            }
        }

        // Time remaining till Fajr
        if (fajrEl && fajrMin >= 0) {
            var fajrMs = todayBase + fajrMin * 60000;
            var fDiff = fajrMs - nowMs;
            if (fDiff > 0) {
                // Before Fajr - show countdown
                if (fajrLabelEl) fajrLabelEl.textContent = 'باقي للفجر';
                fajrEl.textContent = formatHoursMin(Math.ceil(fDiff / 60000));
            } else {
                // After Fajr - show tomorrow's Fajr countdown
                if (fajrLabelEl) fajrLabelEl.textContent = 'الفجر غداً بعد';
                var tomorrowFajr = fajrMs + 86400000;
                fajrEl.textContent = formatHoursMin(Math.ceil((tomorrowFajr - nowMs) / 60000));
            }
        }
    }

    // Update fasting info every minute
    setInterval(updateFastingInfo, 60000);

    // ═══════════════════════════════════════
    // Ramadan Calendar
    // ═══════════════════════════════════════
    function loadRamadanCalendar() {
        var container = document.getElementById('ramadanCalContainer');

        // Need Hijri date from prayer times
        if (!currentHijriYear) return;

        // Get user coordinates
        var lat = userLat, lng = userLng;
        if (!lat || !lng) {
            try {
                var c = JSON.parse(localStorage.getItem('iq_coords'));
                if (c) { lat = c.lat; lng = c.lng; }
            } catch(e) {}
        }
        if (!lat) { lat = 21.4225; lng = 39.8262; }

        // Use stored Hijri date from prayer times API
        var ramYear = (currentHijriMonth > 9) ? currentHijriYear + 1 : currentHijriYear;
        var currentRamDay = (currentHijriMonth === 9) ? currentHijriDay : -1;

        fetchRamadanMonth(ramYear, lat, lng, currentRamDay)
            .catch(function() {
                if (container) container.innerHTML = '<div style="text-align:center;padding:30px;color:var(--text-muted)">تعذر تحميل التقويم. تأكد من الاتصال بالإنترنت.</div>';
            });
    }

    function fetchRamadanMonth(hijriYear, lat, lng, currentRamDay) {
        var container = document.getElementById('ramadanCalContainer');
        var infoEl = document.getElementById('ramadanCalInfo');
        // Aladhan hijri calendar: /v1/hijriCalendar/{month}/{year}
        return fetch('https://api.aladhan.com/v1/hijriCalendar/9/' + hijriYear + '?latitude=' + lat + '&longitude=' + lng + '&method=4')
            .then(function(r) { return r.json(); })
            .then(function(d) {
                if (d.code !== 200 || !d.data || !d.data.length) throw new Error('No data');
                if (infoEl) infoEl.textContent = 'رمضان ' + hijriYear + ' هـ | الحسابات بناءً على موقعك';

                var html = '<div class="ramadan-cal-scroll"><table class="ramadan-cal-table">';
                html += '<thead><tr><th>اليوم</th><th>التاريخ</th><th>الإمساك</th><th>الفجر</th><th>الشروق</th><th>الظهر</th><th>العصر</th><th>المغرب</th><th>العشاء</th><th>مدة الصيام</th></tr></thead><tbody>';

                var dayNames = ['الأحد','الإثنين','الثلاثاء','الأربعاء','الخميس','الجمعة','السبت'];

                d.data.forEach(function(day) {
                    var t = day.timings;
                    var hd = day.date.hijri;
                    var gd = day.date.gregorian;
                    var dayNum = parseInt(hd.day);
                    var gregDate = gd.day + '/' + gd.month.number;
                    var jsDate = new Date(gd.year + '-' + gd.month.number.toString().padStart(2,'0') + '-' + gd.day.padStart(2,'0'));
                    var dayName = dayNames[jsDate.getDay()] || '';

                    // Clean time strings (remove timezone info like " (AST)")
                    function cleanTime(s) { return s ? s.replace(/\s*\(.*\)/, '') : '--:--'; }

                    var fajrT = cleanTime(t.Fajr);
                    var maghribT = cleanTime(t.Maghrib);
                    var imsak = cleanTime(t.Imsak);

                    // Fasting duration
                    var fMin = timeToMinutes(fajrT);
                    var mMin = timeToMinutes(maghribT);
                    var duration = (fMin >= 0 && mMin >= 0) ? formatHoursMin(mMin - fMin) : '--';

                    var isToday = (dayNum === currentRamDay) ? ' class="today-row"' : '';

                    html += '<tr' + isToday + '>'
                        + '<td>' + toArabicNum(dayNum) + '</td>'
                        + '<td>' + dayName + ' ' + gregDate + '</td>'
                        + '<td>' + imsak + '</td>'
                        + '<td>' + fajrT + '</td>'
                        + '<td>' + cleanTime(t.Sunrise) + '</td>'
                        + '<td>' + cleanTime(t.Dhuhr) + '</td>'
                        + '<td>' + cleanTime(t.Asr) + '</td>'
                        + '<td>' + maghribT + '</td>'
                        + '<td>' + cleanTime(t.Isha) + '</td>'
                        + '<td>' + duration + '</td>'
                        + '</tr>';
                });

                html += '</tbody></table></div>';
                if (container) container.innerHTML = html;

                // Auto-scroll to today
                setTimeout(function() {
                    var todayRow = container.querySelector('.today-row');
                    if (todayRow) todayRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 200);
            });
    }

    // ═══════════════════════════════════════
    // Tasbeeh Counter
    // ═══════════════════════════════════════
    var tasbeehCount = 0, tasbeehTarget = 33, tasbeehTotal = 0, tasbeehText = 'سبحان الله';

    function initTasbeeh() {
        try {
            var saved = JSON.parse(localStorage.getItem('iq_tasbeeh'));
            if (saved) { tasbeehTotal = saved.total || 0; }
        } catch(e){}
        updateTasbeehDisplay();
    }

    function setTasbeehPreset(text, target, btn) {
        tasbeehText = text;
        tasbeehTarget = target;
        tasbeehCount = 0;
        document.querySelectorAll('.tasbeeh-preset').forEach(function(b) { b.classList.remove('active'); });
        if (btn) btn.classList.add('active');
        updateTasbeehDisplay();
    }

    function incrementTasbeeh() {
        tasbeehCount++;
        tasbeehTotal++;
        if (tasbeehTarget > 0 && tasbeehCount >= tasbeehTarget) {
            // Completed - flash effect
            var btn = document.getElementById('tasbeehBtn');
            if (btn) { btn.style.borderColor = '#f1c40f'; setTimeout(function() { btn.style.borderColor = ''; }, 800); }
        }
        updateTasbeehDisplay();
        try { localStorage.setItem('iq_tasbeeh', JSON.stringify({total: tasbeehTotal})); } catch(e){}
    }

    function resetTasbeeh() {
        tasbeehCount = 0;
        updateTasbeehDisplay();
    }

    function updateTasbeehDisplay() {
        var countEl = document.getElementById('tasbeehCount');
        var targetEl = document.getElementById('tasbeehTarget');
        var labelEl = document.getElementById('tasbeehLabel');
        var totalEl = document.getElementById('tasbeehTotalBtn');
        if (countEl) countEl.textContent = toArabicNum(tasbeehCount);
        if (targetEl) targetEl.textContent = tasbeehTarget > 0 ? 'الهدف: ' + toArabicNum(tasbeehTarget) : 'بدون حد';
        if (labelEl) labelEl.textContent = tasbeehText;
        if (totalEl) totalEl.textContent = 'المجموع: ' + toArabicNum(tasbeehTotal);
    }

    // ═══════════════════════════════════════
    // 99 Names of Allah
    // ═══════════════════════════════════════
    var NAMES_99 = [
        ['الله','Allah'],['الرَّحْمَنُ','الرحمن'],['الرَّحِيمُ','الرحيم'],['المَلِكُ','الملك'],['القُدُّوسُ','القدوس'],
        ['السَّلَامُ','السلام'],['المُؤْمِنُ','المؤمن'],['المُهَيْمِنُ','المهيمن'],['العَزِيزُ','العزيز'],['الجَبَّارُ','الجبار'],
        ['المُتَكَبِّرُ','المتكبر'],['الخَالِقُ','الخالق'],['البَارِئُ','البارئ'],['المُصَوِّرُ','المصور'],['الغَفَّارُ','الغفار'],
        ['القَهَّارُ','القهار'],['الوَهَّابُ','الوهاب'],['الرَّزَّاقُ','الرزاق'],['الفَتَّاحُ','الفتاح'],['العَلِيمُ','العليم'],
        ['القَابِضُ','القابض'],['البَاسِطُ','الباسط'],['الخَافِضُ','الخافض'],['الرَّافِعُ','الرافع'],['المُعِزُّ','المعز'],
        ['المُذِلُّ','المذل'],['السَّمِيعُ','السميع'],['البَصِيرُ','البصير'],['الحَكَمُ','الحكم'],['العَدْلُ','العدل'],
        ['اللَّطِيفُ','اللطيف'],['الخَبِيرُ','الخبير'],['الحَلِيمُ','الحليم'],['العَظِيمُ','العظيم'],['الغَفُورُ','الغفور'],
        ['الشَّكُورُ','الشكور'],['العَلِيُّ','العلي'],['الكَبِيرُ','الكبير'],['الحَفِيظُ','الحفيظ'],['المُقِيتُ','المقيت'],
        ['الحَسِيبُ','الحسيب'],['الجَلِيلُ','الجليل'],['الكَرِيمُ','الكريم'],['الرَّقِيبُ','الرقيب'],['المُجِيبُ','المجيب'],
        ['الوَاسِعُ','الواسع'],['الحَكِيمُ','الحكيم'],['الوَدُودُ','الودود'],['المَجِيدُ','المجيد'],['البَاعِثُ','الباعث'],
        ['الشَّهِيدُ','الشهيد'],['الحَقُّ','الحق'],['الوَكِيلُ','الوكيل'],['القَوِيُّ','القوي'],['المَتِينُ','المتين'],
        ['الوَلِيُّ','الولي'],['الحَمِيدُ','الحميد'],['المُحْصِي','المحصي'],['المُبْدِئُ','المبدئ'],['المُعِيدُ','المعيد'],
        ['المُحْيِي','المحيي'],['المُمِيتُ','المميت'],['الحَيُّ','الحي'],['القَيُّومُ','القيوم'],['الوَاجِدُ','الواجد'],
        ['المَاجِدُ','الماجد'],['الوَاحِدُ','الواحد'],['الصَّمَدُ','الصمد'],['القَادِرُ','القادر'],['المُقْتَدِرُ','المقتدر'],
        ['المُقَدِّمُ','المقدم'],['المُؤَخِّرُ','المؤخر'],['الأَوَّلُ','الأول'],['الآخِرُ','الآخر'],['الظَّاهِرُ','الظاهر'],
        ['البَاطِنُ','الباطن'],['الوَالِي','الوالي'],['المُتَعَالِي','المتعالي'],['البَرُّ','البر'],['التَّوَّابُ','التواب'],
        ['المُنْتَقِمُ','المنتقم'],['العَفُوُّ','العفو'],['الرَّؤُوفُ','الرؤوف'],['مَالِكُ المُلْكِ','مالك الملك'],
        ['ذُو الجَلَالِ وَالإِكْرَامِ','ذو الجلال والإكرام'],['المُقْسِطُ','المقسط'],['الجَامِعُ','الجامع'],
        ['الغَنِيُّ','الغني'],['المُغْنِي','المغني'],['المَانِعُ','المانع'],['الضَّارُّ','الضار'],['النَّافِعُ','النافع'],
        ['النُّورُ','النور'],['الهَادِي','الهادي'],['البَدِيعُ','البديع'],['البَاقِي','الباقي'],['الوَارِثُ','الوارث'],
        ['الرَّشِيدُ','الرشيد'],['الصَّبُورُ','الصبور']
    ];

    function renderNames() {
        var grid = document.getElementById('namesGrid');
        if (!grid) return;
        grid.innerHTML = NAMES_99.map(function(n, i) {
            return '<div class="name-card"><div class="name-card-ar">' + n[0] + '</div><div class="name-card-meaning">' + toArabicNum(i+1) + '</div></div>';
        }).join('');
    }

    // ═══════════════════════════════════════
    // Tools Tab Init
    // ═══════════════════════════════════════
    var toolsInited = false;
    function initTools() {
        if (toolsInited) return;
        toolsInited = true;
        initTasbeeh();
        renderNames();
        if (!prayerTimesCache) fetchPrayerTimes();
    }

    // Initialize home on load
    initHome();
</script>

<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js');
    }
</script>

</body>
</html>
